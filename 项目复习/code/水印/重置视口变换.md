在 `saveImg` 函数中重置视口变换是为了确保导出的图像不受当前画布视口变换的影响。下面是详细解释为什么需要重置视口变换，以及视口变换的作用。

### 视口变换（Viewport Transform）

#### 视口变换的作用
视口变换是 `fabric.js` 提供的一种功能，用于在画布上应用缩放、平移和旋转等变换效果。通过视口变换，用户可以在画布上进行缩放和拖动操作，以便更好地查看和编辑画布内容。

#### 视口变换的影响
当应用视口变换时，画布上的所有对象都会受到变换的影响。例如，如果用户对画布进行了缩放操作，画布上的对象会相应地放大或缩小。如果用户对画布进行了平移操作，画布上的对象会相应地移动。

### 为什么需要重置视口变换

#### 导出图像的一致性
在导出图像时，我们希望导出的图像与用户在画布上看到的内容一致。如果不重置视口变换，导出的图像可能会受到当前视口变换的影响，导致图像的缩放和平移效果与预期不符。

#### 确保图像的正确性
重置视口变换可以确保导出的图像不受当前视口变换的影响，保持图像的正确性和一致性。这样，无论用户在画布上进行了怎样的缩放和平移操作，导出的图像都能保持原始比例和位置。

### 具体实现

#### 重置视口变换
在 `saveImg` 函数中，我们通过调用 `this.editor.setViewportTransform([1, 0, 0, 1, 0, 0])` 方法来重置视口变换。这个方法将视口变换矩阵重置为单位矩阵，取消所有的缩放和平移效果。

#### 代码示例
```javascript
saveImg() {
  this.editor.hooksEntity.hookSaveBefore.callAsync('', () => {
    const option = this._getSaveOption();
    // 重置视口变换
    this.editor.setViewportTransform([1, 0, 0, 1, 0, 0]);
    const dataUrl = this.canvas.toDataURL(option);
    this.editor.hooksEntity.hookSaveAfter.callAsync(dataUrl, () => {
      downFile(dataUrl, 'png');
    });
  });
}
```

### 详细解释

1. **保存前的钩子函数**：
   - 调用 `hookSaveBefore` 钩子函数，确保在保存前执行一些必要的操作。

2. **获取保存选项**：
   - 调用 `this._getSaveOption()` 方法获取保存图像的选项。

3. **重置视口变换**：
   - 调用 `this.editor.setViewportTransform([1, 0, 0, 1, 0, 0])` 方法重置视口变换。这个方法将视口变换矩阵重置为单位矩阵，取消所有的缩放和平移效果。

4. **获取图像数据**：
   - 使用 `this.canvas.toDataURL(option)` 方法将画布内容转换为 PNG 数据 URL。

5. **保存后的钩子函数**：
   - 调用 `hookSaveAfter` 钩子函数，确保在保存后执行一些必要的操作。

6. **下载文件**：
   - 调用 `downFile` 方法下载文件，文件名为 'png'。

### 总结

在 `saveImg` 函数中重置视口变换是为了确保导出的图像不受当前画布视口变换的影响。通过重置视口变换，可以确保导出的图像与用户在画布上看到的内容一致，保持图像的正确性和一致性。这样，无论用户在画布上进行了怎样的缩放和平移操作，导出的图像都能保持原始比例和位置。通过这种方法，可以确保导出的图像符合预期，满足用户的需求。
