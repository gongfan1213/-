
**4.1.2 画布选择流程**

**4.1.2.1 总述**

*   **定义:** 画布选择是 2D 编辑的第一步。
*   **用户选择:**
    *   标品：标品又分为5大类，每类里面有各种产品样式，每个产品样式包含画布底图和场景图信息.
    *   非标品：只包含统一画布底图，只是做画比例不一样.
*   **目标:** 获取画布数据并选择进入下一步 > 99.9%

**4.1.2.2 流程图**

1.  **产品配置画布数据:**
    *   在 cms 中配置数据.
    *   获取画布数据

2.  **用户进入编辑器:**

3.  **选择产品类型:**

4.  **选择底板底图:**
    *   设置画布底图，更新项目数据.

5.  **初始化画布:**
    *   主要上传下面数据:
       1. 画布缩略图和位置信息
       2. 初始化print_param.

6.  **加载场景图:**

7.  **判断是否有3D模型**
    *   true: 加载3D模型,获取到项目详情信息.成功,则创建项目.
    *   false: 加载材质.得到项目信息, 成功,则创建项目.

8. **创建项目:**
   *  提示用户

9. **判断是否覆盖:**
   *   true: 获取所有画布的详情信息, 修改当前项目所有基础画布信息, 更新项目，并更新到新画布
    *   false: 重新设置画布渲染数据.

**补充说明 (来自图片中的标注):**

*   **参数配置:** 参数配置是根据 mm 转像素，这里可能会有偏差，1px 的偏差，需要经过测试验证是否影响。
*   **Hash Zhu:** 开发者或团队标记。

**要点提炼:**

*   **两种画布类型:**
    *   **标品:** 具有预定义的底图和场景图。
    *   **非标品:** 只有底图，比例不同。
*   **数据来源:** 画布数据在 CMS (内容管理系统) 中配置。
*   **初始化数据:** 初始化画布时需要上传缩略图、位置信息和 `print_param`。
*   **3D 模型/材质:** 根据是否有 3D 模型，会加载不同的资源。
*   **项目覆盖:** 如果存在同名项目，可以选择覆盖或创建新项目。
*   **单位转换:** 参数配置涉及毫米到像素的转换，需要注意精度问题。

**总结:**

画布选择流程是用户进入 2D 编辑的第一步。用户可以选择标品或非标品画布，系统会根据选择加载相应的数据并初始化画布。 流程中涉及 CMS 数据配置、3D 模型/材质加载、项目覆盖判断等环节。
