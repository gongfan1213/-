> ğŸ’­ å¥½çš„ï¼Œæˆ‘éœ€è¦å¸®ç”¨æˆ·è¯¦ç»†è®²è§£ä»–ä»¬ä¹‹å‰å‘é€çš„ä»£ç ä¸­æ¶‰åŠçš„Babylon.js APIã€‚æ ¹æ®ä¹‹å‰çš„å¯¹è¯ï¼Œç”¨æˆ·æåˆ°çš„ä»£ç æ˜¯å…³äºä¸€ä¸ªReactçš„ModelViewerç»„ä»¶ï¼Œä½¿ç”¨çš„æ˜¯Babylon.jsè¿›è¡Œ3Dæ¨¡å‹çš„å±•ç¤ºå’Œäº¤äº’ã€‚ç°åœ¨ç”¨æˆ·å¸Œæœ›äº†è§£è¿™äº›ä»£ç ä¸­æ‰€ç”¨åˆ°çš„å…·ä½“APIï¼Œå¹¶è¯¦ç»†è¯´æ˜æ¯ä¸ªAPIçš„åŠŸèƒ½å’Œä½œç”¨ã€‚
>
> é¦–å…ˆï¼Œå›é¡¾ä¹‹å‰çš„å¯¹è¯ï¼Œç”¨æˆ·æä¾›çš„ä»£ç å¯èƒ½åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªä¸»è¦éƒ¨åˆ†ï¼š
>
> 1. **å¼•æ“å’Œåœºæ™¯çš„åˆå§‹åŒ–** (`Engine`, `Scene`)
>
> 2. **ç›¸æœºçš„åˆ›å»ºå’Œé…ç½®** (`ArcRotateCamera`, `Vector3`)
>
> 3. **å…‰æºçš„è®¾ç½®** (`HemisphericLight`, `DirectionalLight`)
>
> 4. **æ¨¡å‹çš„åŠ è½½** (`SceneLoader.ImportMeshAsync`)
>
> 5. **äº¤äº’å¼æ–¹æ³•æš´éœ²** (`useImperativeHandle`ç»“åˆç›¸æœºå’Œæ¨¡å‹æ“ä½œ)
>
> 6. **è°ƒè¯•å·¥å…·çš„é›†æˆ** (`scene.debugLayer.show`)
>
> æ­¤å¤–ï¼Œå¯èƒ½è¿˜æ¶‰åŠç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€äº‹ä»¶ç›‘å¬ç­‰ã€‚ç”¨æˆ·çš„å½“å‰è¯·æ±‚æ˜¯è¦è¯¦ç»†è®²è§£è¿™äº›éƒ¨åˆ†æ‰€æ¶‰åŠçš„Babylon.js APIä»¥åŠå®ƒä»¬åœ¨ä»£ç ä¸­çš„å…·ä½“ä½œç”¨ã€‚
>
> æ¥ä¸‹æ¥ï¼Œéœ€è¦é€ä¸€åˆ†ææ¯ä¸ªAPIçš„åŠŸèƒ½ã€å‚æ•°ä»¥åŠä½¿ç”¨åœºæ™¯ã€‚ç”¨æˆ·å¯èƒ½å¸Œæœ›äº†è§£æ¯ä¸ªAPIçš„ç”¨é€”ï¼Œæ¯”å¦‚`SceneLoader.ImportMeshAsync`æ˜¯ç”¨æ¥å¼‚æ­¥åŠ è½½æ¨¡å‹çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•çš„å„ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿè¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ
>
> è¿˜éœ€è¦æ³¨æ„ç”¨æˆ·æåˆ°çš„ä»£ç ä¸­å¯èƒ½å­˜åœ¨çš„Reactç›¸å…³éƒ¨åˆ†ï¼Œå¦‚Hooksï¼ˆuseEffect, useRef, useImperativeHandleï¼‰æ˜¯å¦‚ä½•ä¸Babylon.jsçš„APIç»“åˆçš„ã€‚æ¯”å¦‚ï¼Œç»„ä»¶å¸è½½æ—¶è°ƒç”¨`engine.dispose()`ï¼Œè¿™ä¸ªæ—¶å€™Babylon.jsçš„èµ„æºæ˜¯å¦‚ä½•è¢«æ­£ç¡®é‡Šæ”¾çš„ï¼Ÿè¿™éœ€è¦è§£é‡Š`Engine.dispose()`æ–¹æ³•çš„ä½œç”¨ã€‚
>
> æ­¤å¤–ï¼Œç”¨æˆ·å¯èƒ½å¯¹ä¸€äº›ç‰¹å®šåŠŸèƒ½çš„å…·ä½“å®ç°ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæ¯”å¦‚ç›¸æœºçš„æ§åˆ¶ï¼ˆæ‹–æ‹½ã€ç¼©æ”¾ï¼‰ã€å…‰æºå¦‚ä½•è·Ÿéšç›¸æœºã€æ¨¡å‹çš„åŠ¨æ€åŠ è½½å’Œæ¸…ç†ã€‚éœ€è¦ç”¨Babylon.jsçš„APIæ¥è§£é‡Šè¿™äº›åŠŸèƒ½æ˜¯å¦‚ä½•å®ç°çš„ã€‚
>
> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”¨æˆ·å¯èƒ½æ²¡æœ‰æä¾›å®Œæ•´çš„ä»£ç ï¼Œæ‰€ä»¥éœ€è¦åŸºäºå¸¸è§æ¨¡å¼å’Œä¹‹å‰è®¨è®ºçš„å†…å®¹æ¥æ¨æµ‹ï¼Œå¯èƒ½ä¼šæåˆ°å¦‚æœç”¨æˆ·æœ‰ç‰¹å®šéƒ¨åˆ†çš„ä»£ç ï¼Œå¯ä»¥è¿›ä¸€æ­¥è¯¦ç»†è§£é‡Šã€‚åŒæ—¶ï¼Œè¦ç¡®ä¿æœ¯è¯­å‡†ç¡®ï¼Œæ¯”å¦‚`ArcRotateCamera`çš„å‚æ•°å«ä¹‰ï¼Œå¦‚alphaã€betaã€radiusç­‰ï¼Œä»¥åŠå…¶attachControlæ–¹æ³•çš„ä½¿ç”¨ã€‚
>
> æ€»ç»“æ­¥éª¤ï¼š
>
> 1. **åˆ†æ¨¡å—åˆ†APIè®²è§£**ï¼Œæ¯”å¦‚å¼•æ“ã€åœºæ™¯ã€ç›¸æœºã€å…‰æºã€æ¨¡å‹åŠ è½½ã€è°ƒè¯•å·¥å…·ç­‰ã€‚
>
> 2. æ¯ä¸ªAPIåˆ—å‡ºå…¶æ‰€åœ¨çš„æ¨¡å—ï¼ˆå¦‚ä»@babylonjs/coreå¯¼å…¥ï¼‰ã€‚
>
> 3. è¯´æ˜æ¯ä¸ªAPIçš„ä½œç”¨ã€å‚æ•°åˆ—è¡¨åŠå„ä¸ªå‚æ•°çš„æ„ä¹‰ã€‚
>
> 4. ç»“åˆç”¨æˆ·åœ¨ModelViewerç»„ä»¶ä¸­çš„ä½¿ç”¨åœºæ™¯ï¼Œè§£é‡Šè¿™äº›APIå¦‚ä½•è¢«åº”ç”¨ï¼Œå¦‚åˆå§‹åŒ–å¼•æ“æ—¶çš„å‚æ•°ï¼Œç›¸æœºçš„é…ç½®é€‰é¡¹ï¼ŒåŠ è½½æ¨¡å‹çš„å…·ä½“æ–¹æ³•ç­‰ã€‚
>
> 5. å¼ºè°ƒç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œèµ„æºæ¸…ç†çš„é‡è¦æ€§ï¼Œå¦‚disposeæ–¹æ³•çš„é‡è¦æ€§ã€‚
>
> 6. æ¶‰åŠåˆ°çš„React Hookså¦‚ä½•ä¸Babylon.js APIç»“åˆï¼Œå¦‚useEffectä¸­è¿›è¡Œåˆå§‹åŒ–å’Œæ¸…ç†ï¼ŒuseRefå¼•ç”¨DOMå…ƒç´ å’ŒBabylonå¯¹è±¡ï¼ŒuseImperativeHandleæš´éœ²æ–¹æ³•ç»™çˆ¶ç»„ä»¶ç­‰ã€‚
>
> 7. æœ€åè¡¥å……ä¸€äº›å¯èƒ½çš„æœ€ä½³å®è·µå’Œå¸¸è§é—®é¢˜ï¼Œæ¯”å¦‚æ€§èƒ½ä¼˜åŒ–å»ºè®®ã€è°ƒè¯•æŠ€å·§ç­‰ã€‚
>
> åœ¨è§£é‡Šè¿‡ç¨‹ä¸­éœ€è¦ç¡®ä¿è¯­è¨€æ¸…æ™°æ˜“æ‡‚ï¼ŒæŠ€æœ¯æœ¯è¯­è¦é€‚å½“è§£é‡Šï¼Œç‰¹åˆ«æ˜¯å¦‚æœç”¨æˆ·å¯èƒ½å¯¹Babylon.jsä¸å¤ªç†Ÿæ‚‰çš„æƒ…å†µä¸‹ã€‚åŒæ—¶è¦æ£€æŸ¥å„ä¸ªAPIçš„ç”¨æ³•æ˜¯å¦ç¬¦åˆBabylon.jsçš„æœ€æ–°ç‰ˆæœ¬ï¼Œé¿å…è¿‡æ—¶çš„æ–¹æ³•æˆ–å‚æ•°ã€‚
>
> 



ä»¥ä¸‹æ˜¯åŸºäºä½ ä¹‹å‰æä¾›çš„ `<ModelViewer>` ç»„ä»¶ç›¸å…³ä»£ç ï¼ˆReact + TypeScript ä½¿ç”¨åœºæ™¯ï¼‰æ‰€æ¶‰åŠçš„ **Babylon.js API æ·±åº¦è§£æ**ï¼ŒæŒ‰æ¨¡å—åˆ†ç±»è¯¦ç»†è¯´æ˜å…¶ä½œç”¨ã€å‚æ•°åŠæŠ€æœ¯ç»†èŠ‚ï¼š

---

## **æ ¸å¿ƒæ¨¡å— API**
### **1. å¼•æ“ä¸åœºæ™¯åˆå§‹åŒ–**
#### **`Engine` ç±»** (`@babylonjs/core`)
```typescript
new Engine(
  canvas: HTMLCanvasElement, // ç»‘å®šç”»å¸ƒå…ƒç´ çš„å®½é«˜ä¼šè‡ªåŠ¨åŒæ­¥
  antialias?: boolean,       // å¼€å¯æŠ—é”¯é½¿ï¼ˆé»˜è®¤ trueï¼‰
  options?: EngineOptions     // WebGL é«˜çº§é…ç½®ï¼ˆå¦‚æ˜¯å¦ä¿ç•™ drawing bufferï¼‰
);
```
- **æ ¸å¿ƒèŒè´£**ï¼šç®¡ç†ä¸ WebGL ä¸Šä¸‹æ–‡çš„é€šä¿¡ï¼Œæ§åˆ¶æ¸²æŸ“å¾ªç¯ã€‚
- **å…³é”®æ–¹æ³•**ï¼š
  - `engine.dispose()`: é”€æ¯å¼•æ“å¹¶é‡Šæ”¾æ‰€æœ‰ GPU èµ„æºï¼ˆç»„ä»¶å¸è½½æ—¶å¿…è°ƒç”¨ï¼‰ã€‚
  - `engine.runRenderLoop(callback)`: å¯åŠ¨è‡ªå®šä¹‰æ¸²æŸ“å¾ªç¯ã€‚
- **ç‰¹æ€§**ï¼šè‡ªåŠ¨ç›‘å¬ `window.resize` äº‹ä»¶ï¼ŒåŠ¨æ€è°ƒæ•´ç”»å¸ƒåˆ†è¾¨ç‡ã€‚

#### **`Scene` ç±»** (`@babylonjs/core`)
```typescript
const scene = new Scene(engine);
```
- **æ ¸å¿ƒèŒè´£**ï¼šæ‰¿è½½æ‰€æœ‰å¯æ¸²æŸ“å¯¹è±¡ï¼ˆç½‘æ ¼ã€ç¯å…‰ã€ç›¸æœºç­‰ï¼‰åŠå…¶çŠ¶æ€ã€‚
- **å¸¸ç”¨æ–¹æ³•**ï¼š
  - `scene.registerBeforeRender(callback)`: æ³¨å†Œæ¯å¸§æ¸²æŸ“å‰è§¦å‘çš„é€»è¾‘ï¼ˆå¦‚æ›´æ–°å…‰æºä½ç½®ï¼‰ã€‚
  - `scene.debugLayer.show(options)`: æ¿€æ´»è°ƒè¯•å±‚ï¼ˆå¯æŸ¥çœ‹æ€§èƒ½åˆ†æã€åœºæ™¯æ ‘ç­‰ï¼‰ã€‚

---

## **2. ç›¸æœºæ§åˆ¶**
#### **`ArcRotateCamera` ç±»** (`@babylonjs/core`)
```typescript
new ArcRotateCamera(
  name: string,
  alpha: number,        // æ°´å¹³æ—‹è½¬å¼§åº¦ï¼ˆ0~2Ï€ï¼‰
  beta: number,         // ä¿¯ä»°è§’åº¦å¼§åº¦ï¼ˆÏ€/2 æ˜¯æ­£ä¸Šæ–¹ï¼Œé¿å…æ¥è¿‘ 0 æˆ– Ï€ ä¼šæœ‰è§†é”¥è£å‰ªé—®é¢˜ï¼‰
  radius: number,       // ç›¸æœºä¸ç›®æ ‡ç‚¹çš„è·ç¦»
  target: Vector3,      // ç›¸æœºç„¦ç‚¹åæ ‡ï¼ˆå¦‚æ¨¡å‹åŸç‚¹ Vector3.Zero()ï¼‰
  scene: Scene
);
```
- **äº¤äº’æ–¹æ³•**ï¼š
  ```typescript
  camera.attachControl(
    canvas: HTMLElement, // ç»‘å®šçš„äº¤äº’å…ƒç´ 
    noPreventDefault?: boolean // å…è®¸é»˜è®¤æ»šåŠ¨è¡Œä¸ºï¼ˆå¦‚é¡µé¢æ»šåŠ¨ï¼‰
  );
  ```
  - é»˜è®¤è¡Œä¸ºï¼šå·¦é”®æ‹–æ‹½æ—‹è½¬è§†è§’ï¼Œå³é”®æ‹–æ‹½å¹³ç§»ï¼Œæ»šè½®ç¼©æ”¾ã€‚
- **åŠ¨æ€æ§åˆ¶**ï¼šç›´æ¥ä¿®æ”¹ `camera.alpha`/`beta`/`radius` å¯é€šè¿‡ä»£ç é©±åŠ¨è§†è§’ã€‚

---

## **3. å…‰æºç±»å‹**
#### **`HemisphericLight` (åŠçƒå…‰)**
```typescript
new HemisphericLight(
  name: string,
  direction: Vector3,  // å…‰çº¿æœå‘ï¼ˆå¦‚ Vector3(0,1,0) è¡¨ç¤ºé¡¶éƒ¨ç…§å°„ï¼‰
  scene: Scene
);
```
- **ç‰¹æ€§**ï¼šæ¨¡æ‹Ÿç¯å¢ƒæ¼«åå°„ï¼Œæ— æ˜ç¡®æ–¹å‘æ€§ï¼Œå¸¸ç”¨äºåŸºç¡€åœºæ™¯ç…§æ˜ã€‚

#### **`DirectionalLight` (æ–¹å‘å…‰)**
```typescript
new DirectionalLight(
  name: string,
  direction: Vector3,  // å…‰çº¿æ–¹å‘ï¼ˆå¦‚ Vector3(-1,-1,-1)ï¼‰
  scene: Scene
);
```
- **ç‰¹æ€§**ï¼šå¹³è¡Œå…‰çº¿ï¼ˆç±»ä¼¼é˜³å…‰ï¼‰ï¼Œå¯æŠ•å°„é˜´å½±ã€‚
- **åŠ¨æ€è¿½è¸ª**ï¼šé€šè¿‡ `light.direction.set(x,y,z)` å¯ä½¿å…¶è·Ÿéšæ‘„åƒæœºè§†è§’ã€‚

---

## **4. æ¨¡å‹åŠ è½½ä¸æ“ä½œ**
#### **`SceneLoader.ImportMeshAsync` æ–¹æ³•** (`@babylonjs/loaders`)
```typescript
SceneLoader.ImportMeshAsync(
  meshNames: string | "",     // ç©ºå­—ç¬¦ä¸²è¡¨ç¤ºåŠ è½½æ‰€æœ‰ç½‘æ ¼
  rootUrl: string,            // æ¨¡å‹èµ„æºçš„åŸºç¡€è·¯å¾„ï¼ˆå¦‚ CDN åœ°å€ï¼‰
  fileName: string,           // æ¨¡å‹æ–‡ä»¶åï¼ˆå¦‚ "model.glb"ï¼‰
  scene: Scene,
  onProgress?: (event) => void // åŠ è½½è¿›åº¦å›è°ƒ
);
```
- **è¿”å›å€¼**: `Promise<{ meshes: AbstractMesh[]; ... }>`
  - `meshes`: æ‰€æœ‰åŠ è½½çš„ç½‘æ ¼ï¼ˆä¸»æ¨¡å‹é€šå¸¸ä¸º `meshes[0]`ï¼‰ã€‚

#### **`AbstractMesh` æ¨¡å‹æ“ä½œ**
```typescript
const model = result.meshes[0];
model.scaling = new Vector3(0.5, 0.5, 0.5); // ç¼©æ”¾
model.position.y = -1;                      // å‚ç›´ä½ç§»
model.rotation.y = Math.PI / 4;             // ç»• Y è½´æ—‹è½¬
model.dispose();                            // é”€æ¯æ¨¡å‹é‡Šæ”¾å†…å­˜
```

---

## **5. ç”¨æˆ·äº¤äº’ä¸è¿›é˜¶ API**
#### ****`Scene.pointerEvents`** (å°„çº¿æ£€æµ‹)**
```typescript
scene.onPointerObservable.add((event) => {
  if (event.type === PointerEventTypes.POINTERPICK) {
    const mesh = event.pickInfo.pickedMesh; // è¢«ç‚¹å‡»çš„ç½‘æ ¼
  }
});
```
- **ç”¨é€”**ï¼šå®ç°ç‚¹å‡»é€‰æ‹©æ¨¡å‹ã€æ˜¾ç¤ºæ ‡ç­¾ç­‰äº¤äº’ã€‚

#### **`EffectLayer` (åå¤„ç†ç‰¹æ•ˆå±‚)**
```typescript
const glowLayer = new GlowLayer("glow", scene);
glowLayer.intensity = 0.5;
```
- **æ”¯æŒç‰¹æ•ˆ**ï¼šè¾‰å…‰ã€æ™¯æ·±æ¨¡ç³Šã€å±å¹•ç©ºé—´åå°„ç­‰ã€‚

---

## **React é›†æˆå…³é”®ç‚¹**
### **Hooks ä¸èµ„æºç®¡ç†**
#### **`useEffect` + `engine.dispose()`**
```typescript
// ç»„ä»¶æŒ‚è½½æ—¶åˆå§‹åŒ–
useEffect(() => {
  const engine = new Engine(...);
  return () => engine.dispose(); // å¸è½½æ—¶é‡Šæ”¾èµ„æº
}, []);

// æ¨¡å‹åŠ¨æ€åŠ è½½
useEffect(() => {
  loadModel().then((model) => {
    return () => model.dispose(); // æ¸…ç†æ—§æ¨¡å‹
  });
}, [props.url]);
```

#### **`useImperativeHandle` æš´éœ²æ–¹æ³•**
```typescript
useImperativeHandle(viewerRef, () => ({
  resetView: () => { camera.alpha = 0; ... },
  getModelSize: () => model.getBoundingInfo().boundingBox,
}));
```

---

## **è°ƒè¯•ä¸æ€§èƒ½ API**
#### **FPS ä¸å†…å­˜ç›‘æ§**
```typescript
const fps = engine.getFps();         // å½“å‰å¸§ç‡
const mem = engine.getMemoryStatus(); // WebGL å†…å­˜å ç”¨
```

#### **`EngineInstrumentation` (æ€§èƒ½åˆ†æ)**
```typescript
import { EngineInstrumentation } from "@babylonjs/instrumentation";
const instrument = new EngineInstrumentation(engine);
instrument.enable();
```

---

## **å…¸å‹é—®é¢˜æ’æŸ¥**
### **æ¨¡å‹åŠ è½½åä¸å¯è§ï¼Ÿ**
- æ£€æŸ¥æ¨¡å‹å°ºå¯¸ï¼šç”¨ `model.getBoundingInfo()` ç¡®è®¤æ˜¯å¦è¿‡å¤§æˆ–è¿‡å°ã€‚
- æ‘„åƒæœºä½ç½®è°ƒæ•´ï¼šåœ¨ `engine.runRenderLoop` ä¸­åŠ¨æ€è¾“å‡º `camera.position` è·Ÿè¸ªã€‚

### **GPU å†…å­˜æ³„æ¼ï¼Ÿ**
- ç¡®ä¿æ‰€æœ‰ä¸´æ—¶ç½‘æ ¼ã€çº¹ç†åœ¨ä¸éœ€è¦æ—¶è°ƒç”¨ `.dispose()`.
- ä½¿ç”¨ `scene.materials`, `scene.textures` æ£€æŸ¥æ®‹ç•™èµ„æºã€‚

---

å¦‚æœæœ‰å…·ä½“çš„ Babylon.js API ä½¿ç”¨é—®é¢˜ï¼ˆå¦‚é˜´å½±é…ç½®ã€éª¨éª¼åŠ¨ç”»æ§åˆ¶ã€ç‰©ç†å¼•æ“é›†æˆï¼‰éœ€è¦è¿›ä¸€æ­¥å±•å¼€ï¼Œè¯·æŒ‡å®šç›®æ ‡æ¨¡å—ä»£ç æˆ–æŠ€æœ¯ç»†èŠ‚ã€‚
