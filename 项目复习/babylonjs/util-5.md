> ğŸ’­ å¥½çš„ï¼Œæˆ‘ç°åœ¨éœ€è¦ä»”ç»†åˆ†æç”¨æˆ·æä¾›çš„è¿™æ®µä»£ç ï¼Œå¹¶ç†è§£å…¶ä¸­çš„åŠŸèƒ½ã€‚è¿™æ®µä»£ç ä¸»è¦æ˜¯å…³äºä½¿ç”¨Babylon.jsåˆ›å»ºå’Œç®¡ç†3Dåœºæ™¯çš„å·¥å…·å‡½æ•°ï¼Œè¿˜æœ‰ä¸€äº›è¾…åŠ©åŠŸèƒ½ï¼Œæ¯”å¦‚æ—¥å¿—æŠ‘åˆ¶ã€èµ„æºæ¸…ç†ã€åœºæ™¯åˆ›å»ºï¼Œä»¥åŠæ£€æµ‹æ˜¯å¦æ˜¯é›†æˆæ˜¾å¡çš„å‡½æ•°ã€‚
>
> é¦–å…ˆï¼Œæˆ‘ä¼šé€ä¸ªå‡½æ•°çœ‹çœ‹æ¯ä¸ªéƒ¨åˆ†çš„ä½œç”¨ã€‚
>
> ä»å¯¼å…¥çš„æ¨¡å—æ¥çœ‹ï¼Œä»–ä»¬ä½¿ç”¨äº†Babylon.jsçš„æ ¸å¿ƒç»„ä»¶ï¼Œæ¯”å¦‚Sceneã€Engineã€é¢œè‰²å’Œå‘é‡ç›¸å…³çš„ç±»ã€‚è¿™è¡¨æ˜è¿™äº›å·¥å…·å‡½æ•°æ˜¯ä¸ºäº†å¤„ç†3Dåœºæ™¯çš„åˆ›å»ºä¸é”€æ¯ï¼Œèµ„æºç®¡ç†ä»¥åŠæ€§èƒ½ä¼˜åŒ–ç›¸å…³çš„ä»»åŠ¡ã€‚
>
> æ¥ä¸‹æ¥çœ‹ç¬¬ä¸€ä¸ªå‡½æ•°`supressLog`ï¼Œå®ƒçš„ä½œç”¨åº”è¯¥æ˜¯ä¸´æ—¶æŠ‘åˆ¶æ§åˆ¶å°çš„æ—¥å¿—è¾“å‡ºã€‚è¿™åœ¨å¤„ç†æŸäº›å¯èƒ½äº§ç”Ÿå¤§é‡æ—¥å¿—çš„æ“ä½œæ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚åœ¨åŠ è½½èµ„æºæˆ–æ¸²æŸ“è¿‡ç¨‹ä¸­é¿å…æ§åˆ¶å°è¢«åˆ·å±ã€‚å®ç°æ–¹å¼æ˜¯é€šè¿‡æ›¿æ¢`console.log`æ–¹æ³•ï¼Œæ‰§è¡Œå›è°ƒåå†æ¢å¤åŸæ¥çš„æ–¹æ³•ã€‚éœ€è¦æ³¨æ„è¿™ç§æ›¿æ¢å¯èƒ½ä¼šå½±å“å…¶ä»–åŒæ—¶æ‰§è¡Œçš„ä»£ç ï¼Œä½†åœ¨è¿™ä¸ªå‡½æ•°å†…æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒä¿å­˜äº†åŸæ–¹æ³•å¹¶åœ¨å®Œæˆåæ¢å¤ã€‚
>
> ç„¶åæ˜¯`disposeScene`å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°è´Ÿè´£é‡Šæ”¾åœºæ™¯ä¸­çš„èµ„æºï¼ŒåŒ…æ‹¬ç½‘æ ¼ã€æè´¨ã€ç²’å­ç³»ç»Ÿå’Œå…‰æºã€‚éå†æ¯ä¸ªèµ„æºå¹¶è°ƒç”¨`dispose`æ–¹æ³•ï¼Œæœ€åå†é”€æ¯åœºæ™¯æœ¬èº«ã€‚è¿™æœ‰åŠ©äºé˜²æ­¢å†…å­˜æ³„æ¼ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šæ¬¡åˆ›å»ºå’Œé”€æ¯åœºæ™¯çš„æƒ…å†µä¸‹ï¼Œæ­£ç¡®çš„èµ„æºé‡Šæ”¾éå¸¸é‡è¦ã€‚ä¸è¿‡ï¼ŒBabylon.jsè‡ªèº«çš„`scene.dispose()`æ–¹æ³•æ˜¯å¦ä¼šè‡ªåŠ¨å¤„ç†è¿™äº›èµ„æºçš„é‡Šæ”¾å‘¢ï¼Ÿå¯èƒ½éœ€è¦æŸ¥é˜…æ–‡æ¡£ç¡®è®¤æ˜¯å¦éœ€è¦æ‰‹åŠ¨éå†é‡Šæ”¾ã€‚æ¯”å¦‚ï¼Œæ–‡æ¡£ä¸­æŒ‡å‡º`scene.dispose()`ä¼šæ¸…ç†å¤§éƒ¨åˆ†èµ„æºï¼Œä½†æœ‰æ—¶å¯èƒ½éœ€è¦æ‰‹åŠ¨å¤„ç†æŸäº›å¼•ç”¨ã€‚
>
> æ¥ä¸‹æ¥æ˜¯`createDefaultScene`ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤åœºæ™¯ï¼Œå¹¶è®¾ç½®äº†æ¸…é™¤é¢œè‰²ä¸ºé¢„è®¾çš„`CLEAR_COLOR`ã€‚è¿™ä¸ªå‡½æ•°ç®€å•æ˜äº†ï¼Œä½†å¯èƒ½éœ€è¦æ‰©å±•ä»¥åŒ…å«å…¶ä»–é»˜è®¤è®¾ç½®ï¼Œæ¯”å¦‚é»˜è®¤å…‰ç…§æˆ–æ‘„åƒæœºï¼Œä½†æ ¹æ®å‡½æ•°å‘½åï¼Œå¯èƒ½ç”¨æˆ·åªéœ€è¦æœ€åŸºæœ¬çš„åœºæ™¯é…ç½®ã€‚
>
> ç„¶åæ˜¯æœ€å¤æ‚çš„éƒ¨åˆ†`isIntegratedGPU`å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯æ£€æµ‹ç”¨æˆ·çš„GPUæ˜¯å¦æ˜¯é›†æˆæ˜¾å¡ï¼Œæ¯”å¦‚Intelçš„æ ¸æ˜¾ã€‚è¿™å¯¹äºæ€§èƒ½ä¼˜åŒ–å¾ˆé‡è¦ï¼Œå› ä¸ºé›†æˆæ˜¾å¡é€šå¸¸æ€§èƒ½è¾ƒå¼±ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´æ¸²æŸ“è®¾ç½®ä»¥ä¿æŒæµç•…ã€‚å‡½æ•°çš„å®ç°æ­¥éª¤åŒ…æ‹¬ï¼š
>
> 1. åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„canvaså…ƒç´ ã€‚
>
> 2. è·å–WebGLä¸Šä¸‹æ–‡ã€‚
>
> 3. å°è¯•è·å–`WEBGL_debug_renderer_info`æ‰©å±•ï¼Œè¯¥æ‰©å±•å…è®¸è®¿é—®æ˜¾å¡ä¿¡æ¯ã€‚
>
> 4. é€šè¿‡æ­¤æ‰©å±•è·å–æ¸²æŸ“å™¨ä¿¡æ¯ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦åŒ…å«'Intel'ï¼ˆå¸¸è§äºé›†æˆæ˜¾å¡ï¼‰ã€‚
>
> è¿™éƒ¨åˆ†å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œæ¯”å¦‚æŸäº›æµè§ˆå™¨æˆ–ç¯å¢ƒä¸æ”¯æŒè¯¥æ‰©å±•ï¼Œæˆ–è€…è¿”å›çš„æ¸²æŸ“å™¨ä¿¡æ¯æ ¼å¼ä¸åŒã€‚ä¾‹å¦‚ï¼Œç§»åŠ¨è®¾å¤‡çš„GPUå¯èƒ½è¿”å›ä¸åŒçš„å­—ç¬¦ä¸²ã€‚æ­¤å¤–ï¼ŒæŸäº›ç‹¬ç«‹æ˜¾å¡å¯èƒ½å¸¦æœ‰'Intel'å­—æ ·ï¼Œæ¯”å¦‚Intelçš„ç‹¬ç«‹æ˜¾å¡ï¼Œè¿™å¯èƒ½å¯¼è‡´è¯¯åˆ¤ã€‚ä½†æ€»ä½“ä¸Šè¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„æ£€æµ‹æ–¹æ³•ï¼Œå¯ä»¥åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å·¥ä½œï¼Œå°¤å…¶æ˜¯åœ¨æ¡Œé¢æµè§ˆå™¨ç¯å¢ƒä¸­ã€‚
>
> è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»£ç ä¸­å°†æ£€æµ‹åˆ°Intelçš„æƒ…å†µè§†ä¸ºé›†æˆæ˜¾å¡ï¼Œä½†å®é™…ä¸ŠIntelä¹Ÿæœ‰ç‹¬ç«‹æ˜¾å¡ï¼ˆå¦‚ARCç³»åˆ—ï¼‰ï¼Œè€Œå…¶ä»–é›†æˆæ˜¾å¡å¦‚AMDçš„APUæˆ–è‹¹æœçš„Mç³»åˆ—èŠ¯ç‰‡å¯èƒ½ä¸ä¼šè¢«æ£€æµ‹åˆ°ã€‚è¿™å¯èƒ½å¯¼è‡´å‡½æ•°åœ¨è¿™äº›æƒ…å†µä¸‹è¿”å›é”™è¯¯çš„åˆ¤æ–­ã€‚
>
> æ­¤å¤–ï¼Œä»£ç ä¸­åˆ›å»ºäº†ä¸´æ—¶çš„canvaså…ƒç´ ä½†æ²¡æœ‰æ¸…ç†ï¼Œè™½ç„¶è¿™å¯èƒ½åœ¨å‡½æ•°æ‰§è¡Œåè¢«åƒåœ¾å›æ”¶ï¼Œä½†æ˜¾å¼åœ°ç§»é™¤å…ƒç´ ä¼šæ›´å®‰å…¨ã€‚
>
> ç°åœ¨ï¼Œç»“åˆä¹‹å‰çš„è®¨è®ºï¼Œç”¨æˆ·å¯èƒ½çš„ç–‘é—®æˆ–éœ€æ±‚åŒ…æ‹¬ï¼š
>
> - `disposeScene`æ˜¯å¦æœ‰å¿…è¦æ‰‹åŠ¨é‡Šæ”¾æ¯ä¸ªèµ„æºè¿˜æ˜¯åœºæ™¯çš„disposeæ–¹æ³•å·²ç»è¶³å¤Ÿï¼Ÿ
>
> - `supressLog`æ˜¯å¦ä¼šå½±å“å…¶ä»–éƒ¨åˆ†çš„æ—¥å¿—è¾“å‡ºï¼Ÿ
>
> - `isIntegratedGPU`å‡½æ•°çš„å‡†ç¡®æ€§å’Œå…¼å®¹æ€§å¦‚ä½•ï¼Ÿ
>
> - å¦‚ä½•æ”¹è¿›é»˜è®¤åœºæ™¯çš„åˆ›å»ºï¼Œæ¯”å¦‚æ·»åŠ é»˜è®¤ç›¸æœºæˆ–ç¯å…‰ï¼Ÿ
>
> æ¥ä¸‹æ¥éœ€è¦ä»¥æ¸…æ™°çš„ç»“æ„è§£é‡Šä»£ç ï¼ŒæŒ‡å‡ºæ½œåœ¨é—®é¢˜ï¼Œå¹¶æä¾›å¯èƒ½çš„ä¼˜åŒ–å»ºè®®ã€‚æ€»ç»“æ¯ä¸ªå‡½æ•°çš„ä½œç”¨ï¼Œå¹¶é’ˆå¯¹æ¯ä¸ªéƒ¨åˆ†å¯èƒ½å­˜åœ¨çš„é™·é˜±æˆ–æœ€ä½³å®è·µè¿›è¡Œè¯´æ˜ï¼Œç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿç†è§£ä»£ç çš„å·¥ä½œåŸç†åŠå¦‚ä½•æ­£ç¡®ä½¿ç”¨è¿™äº›å·¥å…·å‡½æ•°ã€‚
>
> 



ä»¥ä¸‹æ˜¯å¯¹æä¾›çš„ä»£ç å·¥å…·çš„è¯¦ç»†åˆ†æï¼š

---
### ä¸€ã€æ¨¡å—åŠŸèƒ½æ¦‚è§ˆ

| å‡½æ•°/å·¥å…·                      | åŠŸèƒ½æè¿°                            | åº”ç”¨åœºæ™¯                     |
|-------------------------------|-----------------------------------|----------------------------|
| `supressLog`                  | ä¸´æ—¶æŠ‘åˆ¶ `console.log` è¾“å‡º        | æµ‹è¯•ç¯å¢ƒæˆ–æ€§èƒ½å…³é”®æ­¥éª¤é™éŸ³      |
| `disposeScene`                | å½»åº•é‡Šæ”¾åœºæ™¯èµ„æº                   | åœºæ™¯åˆ‡æ¢/ç»„ä»¶å¸è½½æ—¶é˜²æ­¢å†…å­˜æ³„æ¼ |
| `createDefaultScene`          | åˆ›å»ºé¢„é…ç½®çš„é»˜è®¤åœºæ™¯               | å¿«é€Ÿåˆå§‹åŒ–åŸºç¡€ 3D ç¯å¢ƒ         |
| `isIntegratedGPU`             | æ£€æµ‹æ˜¯å¦ä¸ºé›†æˆæ˜¾å¡                 | æ€§èƒ½ä¼˜åŒ–ç­–ç•¥é€‰æ‹©               |

---
### äºŒã€æ ¸å¿ƒå‡½æ•°è§£æ

#### 1. æ—¥å¿—æŠ‘åˆ¶å™¨ (`supressLog`)
```typescript
export function supressLog<T extends unknown>(
  callback: () => T
): T {
  const rawLog = console.log
  console.log = () => { } // è¿›å…¥é™é»˜æ¨¡å¼
  const result = callback()
  console.log = rawLog // æ¢å¤æ—¥å¿—
  return result
}
```
**å…¸å‹ä½¿ç”¨ï¼š**
```typescript
supressLog(() => {
  SceneLoader.LoadModel(...) // é™é»˜åŠ è½½å¯èƒ½äº§ç”Ÿå¤§é‡è°ƒè¯•æ—¥å¿—çš„æ¨¡å‹
})
```

**æ³¨æ„äº‹é¡¹ï¼š**
- âœ– éçº¿ç¨‹å®‰å…¨ï¼šå¼‚æ­¥æ“ä½œä¸­å¯èƒ½å¯¼è‡´æ—¥å¿—ä¸¢å¤±
- âœ” ä½œç”¨åŸŸé™å®šï¼šä»…å½±å“å½“å‰åŒæ­¥ä»£ç å—

#### 2. èµ„æºæ¸…ç†å™¨ (`disposeScene`)
```typescript
export function disposeScene(scene: Scene) {
  scene.meshes?.forEach((mesh) => mesh.dispose())
  scene.materials?.forEach((material) => material.dispose())
  scene.particleSystems?.forEach((ps) => ps.dispose())
  scene.lights?.forEach((light) => light.dispose())
  scene.dispose() // Babylon.js å®˜æ–¹æ¸…ç†æ–¹æ³•
}
```
**å†…å­˜ç®¡ç†ç­–ç•¥å¯¹æ¯”ï¼š**

| æ–¹å¼                  | ä¼˜ç‚¹                      | ç¼ºç‚¹                     |
|----------------------|-------------------------|------------------------|
| ä»…è°ƒç”¨ scene.dispose() | å®˜æ–¹æ¨èï¼Œè‡ªåŠ¨æ¸…ç†å¤§éƒ¨åˆ†èµ„æº  | å¯èƒ½æ®‹ç•™è‡ªå®šä¹‰å¯¹è±¡çš„å¼•ç”¨     |
| æ‰‹åŠ¨éå†æ¸…ç†            | ç¡®ä¿å½»åº•é‡Šæ”¾               | ä»£ç å†—ä½™ï¼Œç»´æŠ¤æˆæœ¬é«˜        |

**æœ€ä½³å®è·µå»ºè®®ï¼š**
```typescript
// æ¨èç»„åˆä½¿ç”¨
function safeDispose(scene: Scene) {
  // å…ˆæ¸…ç†è‡ªå®šä¹‰èµ„æº
  customTextures.forEach(t => t.dispose()) 
  customMeshes.forEach(m => m.dispose())
  
  // å†è°ƒç”¨åœºæ™¯è‡ªæ¯
  scene.dispose() 
}
```

#### 3. é»˜è®¤åœºæ™¯å·¥å‚ (`createDefaultScene`)
```typescript
export function createDefaultScene(engine: Engine) {
  const scene = new Scene(engine)
  scene.clearColor = CLEAR_COLOR // é¢„è®¾èƒŒæ™¯è‰²
  return scene
}
```
**æ¨èæ‰©å±•æ–¹å‘ï¼š**
```typescript
function createProductionScene(engine: Engine) {
  const scene = createDefaultScene(engine)
  
  // æ·»åŠ  HDR ç¯å¢ƒå…‰
  new HemisphericLight("ambient", Vector3.Up(), scene)
  
  // é…ç½®ç‰©ç†å¼•æ“
  scene.enablePhysics(new Vector3(0, -9.81, 0))

  return scene
}
```

#### 4. æ˜¾å¡ç±»å‹æ£€æµ‹ (`isIntegratedGPU`)
```typescript
export function isIntegratedGPU() {
  const canvas = document.createElement('canvas')
  const gl = canvas.getContext('webgl')
  if (!gl) return true // ä¿å®ˆç­–ç•¥
  
  const debugInfo = gl.getExtension('WEBGL_debug_renderer_info')
  const renderer = gl.getParameter(debugInfo?.UNMASKED_RENDERER_WEBGL)?.toLowerCase()
  
  // æ£€æµ‹å…³é”®å­—
  const integratedKeywords = ['intel', 'uhd graphics', 'iris xe'] 
  return integratedKeywords.some(k => renderer.includes(k))
}
```

**æ£€æµ‹ç­–ç•¥ä¼˜åŒ–å»ºè®®ï¼š**
1. **æ·»åŠ æ›´å¤šè®¾å¤‡å…³é”®è¯ï¼š**
   ```typescript
   const mobileGPUs = ['adreno', 'mali', 'power vr']
   const integrated = ['intel', 'radeon graphics', 'microsoft basic renderer']
   ```
   
2. **æ·»åŠ æ˜¾å­˜æ£€æµ‹ï¼ˆè¿›é˜¶ï¼‰ï¼š**
   ```typescript
   const performance = window.performance as any
   const gpuMemory = performance.memory?.jsHeapSizeLimit
   return gpuMemory < 2_147_483_648 // 2GB é˜ˆå€¼
   ```

---
### ä¸‰ã€æ½œåœ¨é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

#### é—®é¢˜ 1: `disposeScene` å¯èƒ½å†—ä½™
**ç°è±¡**ï¼š`scene.dispose()` ä¼šè§¦å‘è‡ªåŠ¨æ¸…ç†ï¼Œæ‰‹åŠ¨éå†å¯èƒ½é‡å¤
**è§£å†³æ–¹æ¡ˆ**ï¼šå‚è€ƒå®˜æ–¹æ–‡æ¡£æ•´ç†ç”Ÿå‘½å‘¨æœŸï¼š

| èµ„æºç±»å‹        | æ˜¯å¦éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ | åŸå›                   |
|---------------|-----------------|---------------------|
| **Mesh**      | âœ”              | å¯èƒ½å­˜åœ¨å¤–éƒ¨å¼•ç”¨         |
| **Material**  | âœ”              | å¸¸è¢«å¤šä¸ªå¯¹è±¡å…±äº«        |
| **Texture**   | âŒ              | scene.dispose è‡ªåŠ¨å¤„ç† |
| **Light**     | âŒ              | åŒä¸Š                 |

#### é—®é¢˜ 2: æ˜¾å¡æ£€æµ‹ç²¾ç¡®åº¦ä¸è¶³
**æ ·ä¾‹è¯¯åˆ¤**ï¼š
- é”™è¯¯è¯†åˆ« Intel ARC ç‹¬ç«‹æ˜¾å¡ä¸ºé›†æˆæ˜¾å¡
- æ— æ³•æ£€æµ‹ AMD APU é›†æˆæ˜¾å¡
**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š
```typescript
function isLowPerformanceGPU() {
  // ç»¼åˆæŒ‡æ ‡è¯„ä¼°
  const isIntegrated = detectIntelIntegrated()
  const isMobile = detectMobileGPU()
  const isLowVRAM = checkVRAM() < 2_000_000_000 // 2GB
  
  return isIntegrated || isMobile || isLowVRAM
}
```

---
### å››ã€å·¥å…·é“¾æ•´åˆå»ºè®®

#### å»ºè®® 1: æ„å»ºæ€§èƒ½ç›‘æ§ä¸­é—´ä»¶
```typescript
class SceneMonitor {
  private fpsMeter: FPSMeter
  
  constructor(scene: Scene) {
    scene.onBeforeRenderObservable.add(() => {
      this.fpsMeter.tick()
    })
  }
  
  get currentFPS() {
    return this.fpsMeter.get()
  }
}
```

#### å»ºè®® 2: åˆ›å»ºèµ„æºåŠ è½½å™¨å°è£…
```typescript
class SafeLoader {
  static async LoadModel(
    scene: Scene, 
    path: string
  ) {
    const isLoadingKey = Symbol('loading')
    scene.metadata[isLoadingKey] = true
    
    try {
      await SceneLoader.ImportMeshAsync(...)
    } finally {
      delete scene.metadata[isLoadingKey
    }
  }
}
```

ä»¥ä¸Šå·¥å…·é›†ç»„ä»¶åŒ–åå¯å½¢æˆå®Œæ•´çš„ 3D å¼€å‘åŸºç¡€è®¾æ–½ï¼Œåç»­å¯åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•å¦‚ï¼š
- è‡ªåŠ¨åŒ–å†…å­˜æ£€æŸ¥å·¥å…·
- å¤šåœºæ™¯çƒ­åˆ‡æ¢ç³»ç»Ÿ
- GPU è‡ªé€‚åº”æ¸²æŸ“ç®¡çº¿
