> ğŸ’­ å¥½çš„ï¼Œæˆ‘ç°åœ¨éœ€è¦åˆ†æç”¨æˆ·æä¾›çš„è¿™æ®µä»£ç ï¼Œå°¤å…¶æ˜¯showMenuå‡½æ•°å’Œç›¸å…³å·¥å…·å‡½æ•°calculateDistanceçš„é€»è¾‘ã€‚ç”¨æˆ·å·²ç»ç»™å‡ºçš„ä»£ç æ¶‰åŠå³é”®èœå•æ˜¾ç¤ºã€å¯¹è±¡é€‰æ‹©ã€ä½ç½®è°ƒæ•´ç­‰ï¼Œæˆ‘éœ€è¦é€æ­¥ç†è§£æ¯ä¸€éƒ¨åˆ†çš„ä½œç”¨ï¼Œå¹¶ç¡®ä¿æˆ‘çš„è§£é‡Šå‡†ç¡®ã€‚
>
> é¦–å…ˆçœ‹showMenuå‡½æ•°ï¼Œå®ƒæ¥æ”¶xå’Œyä½œä¸ºå‚æ•°ï¼Œåº”è¯¥æ˜¯å±å¹•ä¸Šçš„åæ ‡ç‚¹ã€‚å‡½æ•°å†…éƒ¨é¦–å…ˆæ£€æŸ¥canvasä¸­æ˜¯å¦æœ‰æ¿€æ´»å¯¹è±¡ï¼ˆactiveï¼‰ï¼Œå¦‚æœæœ‰å¹¶ä¸”è¯¥å¯¹è±¡è¢«æ ‡è®°ä¸ºç¦ç”¨å³é”®ç‚¹å‡»ï¼ˆactive[CustomKey.DisableRightClick]ï¼‰ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œä¸æ˜¾ç¤ºèœå•ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢æŸäº›ç‰¹å®šå¯¹è±¡è§¦å‘å³é”®èœå•ã€‚
>
> ç„¶åè¿›å…¥else if (!active)å—ï¼Œè¿™æ—¶è¡¨ç¤ºæ²¡æœ‰å½“å‰æ¿€æ´»çš„å¯¹è±¡ã€‚æ¥ä¸‹æ¥ï¼Œè·å–æ‰€æœ‰ä¸æ˜¯å·¥ä½œåŒºï¼ˆWorkspaceID.WorkspaceCavasï¼‰çš„å¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•å¯¹è±¡å­˜åœ¨ï¼Œç›´æ¥è¿”å›ï¼›å¦åˆ™ï¼Œéå†è¿™äº›å¯¹è±¡ï¼Œæ‰¾å‡ºç¦»ç‚¹å‡»ä½ç½®æœ€è¿‘çš„é‚£ä¸ªã€‚è¿™ä¸ªéå†ä½¿ç”¨calculateDistanceè®¡ç®—æ¯ä¸ªå¯¹è±¡åˆ°ç‚¹å‡»ä½ç½®çš„è·ç¦»ï¼Œå¹¶æ›´æ–°æœ€è¿‘å¯¹è±¡nearestObjectã€‚æœ€åï¼Œè®¾ç½®è¿™ä¸ªæœ€è¿‘å¯¹è±¡ä¸ºæ¿€æ´»çŠ¶æ€ã€‚
>
> æ¥ä¸‹æ¥ï¼Œä»£ç è°ƒæ•´èœå•çš„ä½ç½®ä»¥ç¡®ä¿åœ¨è§†å£å†…ã€‚å¦‚æœèœå•çš„åº•éƒ¨ä¼šè¶…å‡ºè§†å£é«˜åº¦ï¼Œå°±å‘ä¸Šè°ƒæ•´yåæ ‡ï¼›åŒæ ·ï¼Œå¦‚æœå³ä¾§è¶…å‡ºè§†å£å®½åº¦ï¼Œå‘å·¦è°ƒæ•´xåæ ‡ã€‚è®°å½•è°ƒæ•´åçš„ä½ç½®åˆ°menuShowPosition.currentï¼Œå¹¶è®¾ç½®èœå•çš„æ ·å¼ï¼ˆvisibilityã€leftã€topã€zIndexï¼‰ï¼Œç„¶åé€šè¿‡setMenuStyleæ›´æ–°çŠ¶æ€ã€‚
>
> å·¥å…·å‡½æ•°calculateDistanceæ˜¯è®¡ç®—ä¸¤ä¸ªç‚¹ä¹‹é—´çš„æ¬§å‡ é‡Œå¾—è·ç¦»ï¼Œä½¿ç”¨äº†dxå’Œdyçš„å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹ã€‚
>
> ç°åœ¨éœ€è¦æ‹†è§£æ¯ä¸€éƒ¨åˆ†çš„é€»è¾‘å¹¶è§£é‡Šæ¸…æ¥šã€‚ç”¨æˆ·å¯èƒ½å¸Œæœ›äº†è§£ä¸ºä»€ä¹ˆä¼šæœ‰è¿™äº›æ¡ä»¶åˆ¤æ–­ã€å¦‚ä½•æ‰¾åˆ°æœ€è¿‘å¯¹è±¡ã€ä»¥åŠå¦‚ä½•è°ƒæ•´èœå•ä½ç½®é¿å…æº¢å‡ºã€‚è¿˜è¦æ³¨æ„å¯èƒ½å­˜åœ¨çš„é—®é¢˜ï¼Œæ¯”å¦‚è®¡ç®—è·ç¦»æ—¶æ˜¯å¦è€ƒè™‘ç”»å¸ƒçš„ç¼©æ”¾ã€åæ ‡è½¬æ¢æ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦æœ‰æ½œåœ¨çš„è¾¹ç•Œé—®é¢˜ç­‰ã€‚
>
> è€ƒè™‘åˆ°ç‚¹å‡»ä½ç½®çš„xå’Œyå¯èƒ½æ˜¯åœ¨ç”»å¸ƒä¸Šçš„åæ ‡ï¼Œä½†å®é™…è®¡ç®—æ—¶ä¼šä¸ä¼šéœ€è¦è½¬æ¢ä¸ºç›¸å¯¹äºæ•´ä¸ªé¡µé¢æˆ–è§†å£çš„åæ ‡ï¼Ÿä»£ç ä¸­æœ‰x - leftbarWidthå’Œy - topbarHeightï¼Œå¯èƒ½è€ƒè™‘åˆ°å·¦ä¾§æ å’Œé¡¶éƒ¨æ çš„å®½åº¦å’Œé«˜åº¦ï¼Œå°†ç‚¹å‡»åæ ‡è½¬æ¢ä¸ºç›¸å¯¹äºç”»å¸ƒçš„åæ ‡ã€‚è¿™å¯èƒ½å‡è®¾leftbarWidthå’ŒtopbarHeightæ˜¯å…¨å±€å˜é‡æˆ–æ¥è‡ªç»„ä»¶çŠ¶æ€ï¼Œéœ€è¦ç¡®è®¤å®ƒä»¬çš„æ¥æºæ˜¯å¦å‡†ç¡®ã€‚
>
> åœ¨éå†å¯¹è±¡å¯»æ‰¾æœ€è¿‘çš„æ—¶å€™ï¼Œå¯èƒ½å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å½“ç”»å¸ƒä¸­æœ‰å¤§é‡å¯¹è±¡æ—¶ã€‚æ­¤å¤–ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡è¢«é®æŒ¡ï¼Œå³ä½¿å®ƒåœ¨æ¬§å‡ é‡Œå¾—è·ç¦»ä¸Šæœ€è¿‘ï¼Œä½†å®é™…ä¸Šå¯èƒ½ç”¨æˆ·ç‚¹å‡»çš„æ˜¯å¦ä¸€ä¸ªåœ¨ä¸Šå±‚çš„å¯¹è±¡ï¼Œè¿™ç§æƒ…å†µä¸‹å¦‚ä½•å¤„ç†ï¼Ÿä»£ç ç›®å‰çš„å®ç°ä»…æ ¹æ®è·ç¦»ï¼Œæ²¡æœ‰è€ƒè™‘å¯¹è±¡å±‚çº§ï¼Œå¯èƒ½æœ‰è¯¯åˆ¤ã€‚
>
> åœ¨è°ƒæ•´èœå•ä½ç½®æ—¶ï¼Œé€»è¾‘æ˜¯å‡å»è¶…å‡ºçš„éƒ¨åˆ†ï¼Œä½†æ›´å¸¸è§çš„åšæ³•å¯èƒ½æ˜¯å°†èœå•ä½ç½®ç¿»è½¬åˆ°å¦ä¸€ä¾§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå³è¾¹è¶…å‡ºï¼Œå°±å°†èœå•æ˜¾ç¤ºåœ¨ç‚¹å‡»ä½ç½®çš„å·¦ä¾§è€Œä¸æ˜¯ä»…è°ƒæ•´xåæ ‡ã€‚å½“å‰çš„å¤„ç†æ–¹å¼æ˜¯å¦ä¼šå¯¼è‡´èœå•éƒ¨åˆ†æ˜¾ç¤ºåœ¨å±å¹•å¤–ï¼Ÿæ¯”å¦‚ï¼Œè°ƒæ•´åçš„xå¯èƒ½å¯¼è‡´å·¦è¾¹ä¸å¤Ÿç©ºé—´ï¼Œä½†å› ä¸ºæ£€æŸ¥çš„æ˜¯å³è¾¹ï¼Œæœ‰å¯èƒ½å·¦è¾¹æ²¡æœ‰è¢«æ£€æŸ¥åˆ°ã€‚
>
> å¦å¤–å˜é‡menuHeightå’ŒmenuWidthçš„æ¥æºå¯èƒ½åœ¨useEffectæˆ–æŸäº›åœ°æ–¹è·å–ï¼Œé”å®šå®ƒä»¬å½“å‰çš„å€¼æ˜¯å¦å¯èƒ½è¿‡æ—¶ï¼Ÿä¾‹å¦‚èœå•å°ºå¯¸å˜åŒ–ä½†æ²¡æœ‰æ›´æ–°å¯¼è‡´è®¡ç®—é”™è¯¯ã€‚è¿™æ—¶ä½¿ç”¨refæ¥å­˜å‚¨å—ï¼Ÿæˆ–è€…é€šè¿‡å…¶ä»–æ–¹å¼åŠ¨æ€è·å–ï¼Ÿ
>
> åœ¨è®¾ç½®nearestObjectæ—¶ï¼Œä½¿ç”¨äº†anyï¼Œè¿™å¯èƒ½å¯¼è‡´ç±»å‹å®‰å…¨é—®é¢˜ï¼Œåç»­æ˜¯å¦æœ‰æ›´å¥½çš„ç±»å‹å®šä¹‰ï¼Ÿ
>
> æ€»ç»“éœ€è¦è¯¦ç»†è€Œæ¸…æ™°åœ°è§£é‡Šæ¯ä¸ªæ­¥éª¤ï¼Œç‰¹åˆ«æ˜¯æ¡ä»¶åˆ¤æ–­ã€æŸ¥æ‰¾æœ€è¿‘å¯¹è±¡ã€åæ ‡è°ƒæ•´ä»¥åŠå¯èƒ½çš„æ½œåœ¨é—®é¢˜å’Œä¼˜åŒ–ç‚¹ï¼Œä»¥ä¾¿ç”¨æˆ·å®Œå…¨ç†è§£ä»£ç çš„é€»è¾‘å’Œæ„å›¾ã€‚
>
> 



ä»¥ä¸‹æ˜¯è¿™æ®µä»£ç çš„è¯¦ç»†é€»è¾‘è§£æï¼š

---

### **æ€»ä½“åŠŸèƒ½**
è¿™æ˜¯ä¸€ä¸ªå³é”®èœå•çš„æ˜¾ç¤ºé€»è¾‘ç®—æ³•ï¼Œä¸»è¦å®ç°äº†ä¸‰ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼š
1. **èœå•è§¦å‘æ¡ä»¶åˆ¤æ–­**ï¼šåŸºäºç”»å¸ƒå¯¹è±¡çŠ¶æ€å†³å®šæ˜¯å¦å…è®¸æ˜¾ç¤ºèœå•ã€‚
2. **åŠ¨æ€é€‰æ‹©ç”»å¸ƒå¯¹è±¡**ï¼šå¦‚æœæœªé€‰ä¸­ä»»ä½•å¯¹è±¡ï¼Œè‡ªåŠ¨æŸ¥æ‰¾è·ç¦»ç‚¹å‡»ä½ç½®æœ€è¿‘çš„å¯¹è±¡å¹¶æ¿€æ´»å®ƒã€‚
3. **èœå•ä½ç½®ä¿®æ­£**ï¼šæ ¹æ®æµè§ˆå™¨çª—å£å°ºå¯¸åŠ¨æ€è°ƒæ•´å³é”®èœå•ä½ç½®ï¼Œé˜²æ­¢æº¢å‡ºã€‚

---

### æµç¨‹å›¾è§£
```plaintext
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚  è°ƒç”¨ showMenu  â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  æ£€æŸ¥æ˜¯å¦æœ‰è¢«ç‚¹å‡»çš„å¯¹è±¡ (Active)ï¼Ÿ  â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ æ˜¯ï¼Œå¯¹è±¡ç¦æ­¢å³é”®ï¼Ÿ       â”‚ å¦
                     â–¼                        â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  ç›´æ¥è¿”å›ï¼Œä¸æ˜¾ç¤ºèœå• â”‚    â”‚ éå†æ‰€æœ‰æœ‰æ•ˆå¯¹è±¡ï¼Œæ‰¾å‡ºè·ç¦» â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ æœ€è¿‘çš„æœªæ¿€æ´»å¯¹è±¡å¹¶æ¿€æ´» â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  æ ¹æ®çª—å£å°ºå¯¸ä¿®æ­£èœå•çš„æ¨ªçºµåæ ‡ï¼ˆé˜²æº¢å‡ºï¼‰ â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  æ›´æ–°èœå•çš„å¯è§æ€§å’Œå®šä½æ ·å¼         â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **åˆ†æ®µé€»è¾‘è§£æ**

#### **1. èœå•è§¦å‘æ¡ä»¶åˆ¤æ–­**
```typescript
const active = canvasEditor?.canvas.getActiveObject();
if (active && active[CustomKey.DisableRightClick]) return;
```
- **é€»è¾‘**ï¼šæ£€æŸ¥å½“å‰æ˜¯å¦æœ‰æ¿€æ´»çš„ç”»å¸ƒå¯¹è±¡ï¼ˆ`active`ï¼‰ä»¥åŠè¯¥å¯¹è±¡æ˜¯å¦è¢«æ ‡è®°ä¸ºç¦æ­¢å³é”®ï¼ˆ`DisableRightClick`ï¼‰ã€‚
- **ä½œç”¨**ï¼šå¯¹ç‰¹å®šå¯¹è±¡ç¦ç”¨å³é”®èœå•ï¼ˆä¾‹å¦‚é”å®šçš„å…ƒç´ æˆ–èƒŒæ™¯ï¼‰ã€‚

---

#### **2. æœªé€‰ä¸­å¯¹è±¡æ—¶çš„è‡ªåŠ¨æ¿€æ´»**
```typescript
else if (!active) {
  const allObject = canvasEditor?.canvas.getObjects()
    .filter((item) => !!item.id && !~item.id.indexOf(WorkspaceID.WorkspaceCavas));
  
  // æ²¡æœ‰æœ‰æ•ˆå¯¹è±¡åˆ™ç›´æ¥è¿”å›
  if (allObject.length === 0) return;
  
  // éå†å¹¶å¯»æ‰¾è·ç¦»ç‚¹å‡»ä½ç½®æœ€è¿‘çš„ç”»å¸ƒå¯¹è±¡
  let nearestObject: any;
  allObject?.forEach((object: fabric.Object) => {
    if (calculateDistance(adjustedClickPos, object) < calculateDistance(adjustedClickPos, nearestObject)) {
      nearestObject = object;
    }
  });
  
  // æ¿€æ´»æ‰¾åˆ°çš„æœ€è¿‘å¯¹è±¡
  if (nearestObject) canvasEditor?.canvas.setActiveObject(nearestObject);
}
```

##### **å­é€»è¾‘åˆ†è§£**
1. **è¿‡æ»¤æ— æ•ˆå¯¹è±¡**:
   ```typescript
   .filter(item => !!item.id && !~item.id.indexOf(WorkspaceID.WorkspaceCavas))
   ```
   - åªä¿ç•™æœ‰ `id` å±æ€§çš„å¯¹è±¡ï¼Œå¹¶æ’é™¤å±äºå·¥ä½œåŒºèƒŒæ™¯çš„å¯¹è±¡ï¼ˆ`WorkspaceCavas`ï¼‰ã€‚
   - **æ³¨æ„**ï¼š`~` æ˜¯ä½è¿ç®—ç¬¦â€œæŒ‰ä½éâ€ï¼Œè¿™é‡Œ `!~str.indexOf()` ç­‰ä»·äº `!str.includes()`ã€‚

2. **è®¡ç®—è·ç¦»å¹¶å¯»æ‰¾æœ€è¿‘å¯¹è±¡**:
   ```typescript
   calculateDistance({ left: x - leftbarWidth, top: y - topbarHeight }, object)
   ```
   - **é‡ç‚¹ä¿®æ­£**ï¼šç‚¹å‡»ä½ç½®çš„åæ ‡ (`x`, `y`) éœ€è¦è½¬æ¢ä¸ºç›¸å¯¹äºç”»å¸ƒçš„åæ ‡ï¼Œæ‰£é™¤éç”»å¸ƒåŒºåŸŸï¼ˆå¦‚å·¦ä¾§è¾¹æ  `leftbarWidth` å’Œé¡¶éƒ¨æ  `topbarHeight`ï¼‰ã€‚
   - **è®¡ç®—å‡½æ•°**ï¼š`calculateDistance` ä¸ºæ¬§å‡ é‡Œå¾—è·ç¦» (Euclidean Distance)ï¼Œè®¡ç®—å…¬å¼ï¼š
     ```javascript
     distance = âˆš[(xâ‚‚ - xâ‚)Â² + (yâ‚‚ - yâ‚)Â²]
     ```

##### **å­˜åœ¨é—®é¢˜**
- **æ€§èƒ½éšæ‚£**ï¼šæ‰‹åŠ¨éå†æ‰€æœ‰å¯¹è±¡å¹¶è®¡ç®—è·ç¦»ï¼Œå½“ç”»å¸ƒå…ƒç´ è¾ƒå¤šæ—¶å¯èƒ½é€ æˆæ€§èƒ½ç“¶é¢ˆã€‚  
- **å±‚å ä¸Šä¸‹æ–‡ç¼ºå¤±**ï¼šå®é™…åœºæ™¯ä¸­è¢«å…¶ä»–å…ƒç´ è¦†ç›–çš„å¯¹è±¡ä»å¯èƒ½è¢«æ¿€æ´»ï¼Œéœ€ç»“åˆ `object.isContainedWithinRect()` åˆ¤æ–­å¯è§æ€§ã€‚

---

#### **3. èœå•ä½ç½®é˜²æº¢å‡ºé€»è¾‘**
```typescript
// çºµå‘é˜²æº¢å‡º
if (menuHeight + y > document.documentElement.clientHeight) {
  y -= menuHeight + y - document.documentElement.clientHeight;
}

// æ¨ªå‘é˜²æº¢å‡º
if (menuWidth + x > document.documentElement.clientWidth) {
  x -= menuWidth + x - document.documentElement.clientWidth;
}
```

##### **æ¨å¯¼å…¬å¼**
å‡è®¾çª—å£é«˜åº¦ä¸º `H`ï¼Œåˆå§‹çºµåæ ‡ä¸º `y`ï¼Œèœå•é«˜åº¦ä¸º `menuHeight`ï¼š
- **æº¢å‡ºæ¡ä»¶**ï¼š`y + menuHeight > H`
- **ä¿®æ­£åçš„çºµåæ ‡**ï¼š  
  ```plaintext
  y -= (y + menuHeight - H)
  â‡’ y = H - menuHeight
  ```
è¿™æ„å‘³ç€å¦‚æœèœå•ä¼šè¶…å‡ºçª—å£ä¸‹è¾¹ç•Œï¼Œåˆ™å¼ºåˆ¶å°†å…¶è´´åº•æ˜¾ç¤ºï¼ˆä¸Šè¾¹ç¼˜ä½ç½®ä¸º `H - menuHeight`ï¼‰ã€‚æ¨ªå‘åŒç†æ¨å¯¼ã€‚

##### **æ½œåœ¨é—®é¢˜**
- **å…¨å±€å˜é‡ä¾èµ–**ï¼š`menuHeight` å’Œ `menuWidth` éœ€åŠ¨æ€è·å–æœ€æ–°å€¼ï¼ˆä¾‹å¦‚é€šè¿‡ `menuRef.current.offsetHeight`ï¼‰ã€‚
- **å°æ•°ç‚¹è¯¯å·®**ï¼šå½“åæ ‡ç»è¿‡ç¼©æ”¾æˆ–å¤æ‚å¸ƒå±€è°ƒæ•´åï¼Œå¯èƒ½å‡ºç° 1-2px çš„è¯¯å·®ã€‚

---

#### **4. èœå•æ ·å¼æ›´æ–°**
```typescript
menuShowPosition.current = { x, y }; // ä¿å­˜å½“å‰èœå•ä½ç½®
const showMenuStyle = {
  visibility: 'visible',
  left: `${x}px`,
  top: `${y}px`,
  zIndex: 999,
};
setMenuStyle(showMenuStyle);
```

---

### **ä»£ç ä¼˜åŒ–å»ºè®®**

#### **1. æœ€è¿‘å¯¹è±¡æŸ¥æ‰¾ä¼˜åŒ–**
ä½¿ç”¨æ›´é«˜æ•ˆçš„ç®—æ³•å‡å°‘éå†æ¬¡æ•°ï¼š
```typescript
const nearestObject = allObject.reduce((closest, current) => {
  const closestDistance = calculateDistance(adjustedClickPos, closest);
  const currentDistance = calculateDistance(adjustedClickPos, current);
  return currentDistance < closestDistance ? current : closest;
});
```

#### **2. åŠ å…¥è¾¹ç•Œå®‰å…¨è·ç¦»**
```typescript
const SAFETY_MARGIN = 5; // 5px å®‰å…¨è¾¹è·
if (y + menuHeight > H - SAFETY_MARGIN) {
  y = H - menuHeight - SAFETY_MARGIN;
}
```

#### **3. è€ƒè™‘æ»šåŠ¨åç§»**
å½“å‰åæ ‡æœªåŒ…å«é¡µé¢æ»šåŠ¨å½±å“ï¼Œä¿®æ­£å…¬å¼ï¼š
```typescript
const clickX = x - leftbarWidth + window.scrollX;
const clickY = y - topbarHeight + window.scrollY;
```

---

### **æ€»ç»“**
è¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªå³é”®èœå•çš„æ™ºèƒ½æ˜¾ç¤ºé€»è¾‘ï¼Œä¸»è¦ç‰¹è‰²æ˜¯é€šè¿‡å‡ ä½•è·ç¦»æŸ¥æ‰¾æœ€è¿‘å¯¹è±¡å’Œé˜²æº¢å‡ºçš„çª—å£è¾¹ç•Œé€‚åº”ã€‚ä½†éœ€æ³¨æ„æ€§èƒ½ä¼˜åŒ–å’Œå¤æ‚çš„ UI å±‚çº§åœºæ™¯ï¼ˆå¦‚é®ç½©ã€æµ®åŠ¨å…ƒç´ ï¼‰ã€‚
