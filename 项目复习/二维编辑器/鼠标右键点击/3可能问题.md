> ğŸ’­ å¥½çš„ï¼Œæˆ‘éœ€è¦æ ¹æ®ç”¨æˆ·æä¾›çš„ä¸¤æ®µå…³äºReactå³é”®èœå•çš„ä»£ç ï¼Œè¯¦ç»†åˆ†æå…¶ä¸­çš„æŠ€æœ¯éš¾ç‚¹ï¼Œå¹¶é¢„æµ‹é¢è¯•å®˜å¯èƒ½ä¼šæå‡ºçš„é—®é¢˜åŠå…¶è§£ç­”ã€‚é¦–å…ˆï¼Œæˆ‘ä¼šå›é¡¾è¿™ä¸¤æ®µä»£ç çš„ç»“æ„å’ŒåŠŸèƒ½ï¼Œç¡®å®šå…³é”®çš„æŠ€æœ¯æŒ‘æˆ˜ã€‚ç„¶åï¼Œæˆ‘éœ€è¦ä»å¸¸è§çš„Reacté¢è¯•é—®é¢˜ä¸­é€‰å–ç›¸å…³ç‚¹ï¼Œç»“åˆä»£ç ä¸­çš„å®ç°è¿›è¡Œè§£ç­”ã€‚
>
> é¦–å…ˆï¼Œåˆ†æç”¨æˆ·çš„ä¸¤æ®µä»£ç ã€‚ç¬¬ä¸€æ®µä»£ç æ˜¯å³é”®èœå•ç»„ä»¶RightclickMenuï¼Œè´Ÿè´£æ˜¾ç¤ºå’Œå®šä½èœå•é¡¹ï¼Œå¤„ç†ç‚¹å‡»äº‹ä»¶å¹¶ä¸canvasEditoräº¤äº’ã€‚ç¬¬äºŒæ®µå¯èƒ½æ˜¯å¤„ç†èœå•äº¤äº’æˆ–canvasæ“ä½œçš„éƒ¨åˆ†ï¼Œæ¯”å¦‚å›¾å±‚é¡ºåºè°ƒæ•´ã€ç¿»è½¬ã€ç¼–ç»„ç­‰ã€‚
>
> æŠ€æœ¯éš¾ç‚¹å¯èƒ½åŒ…æ‹¬ï¼š
>
> 1. **èœå•çš„å®šä½ä¸è§†å£è¾¹ç•Œå¤„ç†**ï¼šç¡®ä¿èœå•åœ¨è§†å£å†…æ˜¾ç¤ºï¼Œä¸ä¼šæº¢å‡ºã€‚ä»£ç ä¸­å·²æœ‰å¤„ç†é€»è¾‘ï¼Œä¾‹å¦‚æ ¹æ®è§†å£è°ƒæ•´åæ ‡ã€‚
>
> 2. **å­èœå•çš„åŠ¨æ€å®šä½**ï¼šå­èœå•çš„ä½ç½®å¦‚ä½•æ ¹æ®çˆ¶èœå•çš„ä½ç½®è°ƒæ•´ï¼Œç‰¹åˆ«æ˜¯é¿å…è¶…å‡ºå±å¹•ã€‚
>
> 3. **è·¨ç»„ä»¶äº‹ä»¶å¤„ç†**ï¼šå¦‚ä½•åœ¨é«˜å±‚æ¬¡ç»„ä»¶ä¸­ç›‘å¬å³é”®äº‹ä»¶å¹¶è§¦å‘èœå•æ˜¾ç¤ºã€‚
>
> 4. **ä¸canvasEditorçš„äº¤äº’**ï¼šå¦‚ä½•å¤„ç†èœå•æ“ä½œå¯¹canvaså…ƒç´ çš„å½±å“ï¼Œå¦‚å¤åˆ¶ã€ç²˜è´´ã€ç¿»è½¬ç­‰ã€‚
>
> 5. **æ€§èƒ½ä¼˜åŒ–**ï¼šé¿å…é‡å¤æ¸²æŸ“ï¼Œç‰¹åˆ«æ˜¯åœ¨é¢‘ç¹æ˜¾ç¤º/éšè—èœå•æ—¶çš„æ€§èƒ½è¡¨ç°ã€‚
>
> 6. **å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§**ï¼šèœå•é…ç½®çš„åŠ¨æ€ç”Ÿæˆï¼Œå¦‚ä½•æ–¹ä¾¿åœ°æ·»åŠ æ–°èœå•é¡¹æˆ–å­èœå•ã€‚
>
> æ¥ä¸‹æ¥ï¼Œé¢„æµ‹é¢è¯•å®˜å¯èƒ½çš„é—®é¢˜åŠç›¸å…³è§£ç­”ï¼š
>
> **1. å¦‚ä½•å®ç°å³é”®èœå•åœ¨è§†å£å†…çš„ç²¾ç¡®å®šä½ï¼Ÿéœ€è¦å¤„ç†å“ªäº›è¾¹ç•Œæƒ…å†µï¼Ÿ**
>
> - **æ€è·¯**ï¼šæ ¹æ®ç‚¹å‡»ä½ç½®å’Œèœå•å°ºå¯¸è°ƒæ•´åæ ‡ï¼Œå¤„ç†æ°´å¹³å’Œå‚ç›´æº¢å‡ºã€‚
>
> - **è§£ç­”**ï¼šè®¡ç®—èœå•çš„æ½œåœ¨ä½ç½®åï¼Œæ£€æŸ¥æ˜¯å¦è¶…å‡ºè§†å£å®½åº¦æˆ–é«˜åº¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœèœå•åº•éƒ¨è¶…å‡ºè§†å£é«˜åº¦ï¼Œåˆ™å‘ä¸Šè°ƒæ•´yåæ ‡ã€‚åŒæ ·å¤„ç†æ°´å¹³æ–¹å‘ï¼Œå¯èƒ½éœ€è¦å·¦å³ç¿»è½¬å­èœå•æˆ–è°ƒæ•´å·¦ä¾§ä½ç½®ã€‚éœ€è¦è€ƒè™‘æ»šåŠ¨åç§»ã€æµè§ˆå™¨çª—å£å¤§å°å˜åŒ–ä»¥åŠåŠ¨æ€å†…å®¹å¯¼è‡´çš„èœå•å°ºå¯¸å˜åŒ–ã€‚
>
> **2. åœ¨å¤„ç†å­èœå•ä½ç½®æ—¶ï¼Œå¦‚ä½•ç¡®ä¿å…¶ä¸è¶…å‡ºå±å¹•è¾¹ç¼˜ï¼Ÿä»£ç ä¸­çš„å®ç°æ˜¯å¦éœ€è¦æ”¹è¿›ï¼Ÿ**
>
> - **åˆ†æä»£ç **ï¼šå½“å‰ä»£ç åœ¨handleChildShowä¸­ï¼Œæ ¹æ®çˆ¶èœå•ä½ç½®å’Œè§†å£å®½åº¦åˆ¤æ–­å­èœå•åº”å·¦æˆ–å³æ˜¾ç¤ºã€‚ä¾‹å¦‚ï¼Œåˆ¤æ–­çˆ¶èœå•å³ä¾§æ˜¯å¦æœ‰è¶³å¤Ÿç©ºé—´ï¼Œå¦åˆ™å‘å·¦å¼¹å‡ºã€‚
>
> - **æ”¹è¿›ç‚¹**ï¼šå¯èƒ½åº”è€ƒè™‘å‚ç›´æ–¹å‘çš„è°ƒæ•´ï¼Œä¾‹å¦‚å­èœå•é«˜åº¦è¶…å‡ºæ—¶å‘ä¸Šè°ƒæ•´ï¼›åŠ¨æ€è®¡ç®—èœå•å°ºå¯¸ï¼Œè€Œéå›ºå®šå®½åº¦ï¼ˆå¦‚247pxï¼‰ï¼›è€ƒè™‘ç¼©æ”¾æˆ–ç§»åŠ¨è®¾å¤‡çš„æƒ…å†µã€‚æ­¤å¤–ï¼Œä½¿ç”¨getBoundingClientRectè·å–å®æ—¶å°ºå¯¸æ›´å¯é ã€‚
>
> **3. å¦‚ä½•ä¼˜åŒ–èœå•çš„æ¸²æŸ“æ€§èƒ½ä»¥é¿å…ä¸å¿…è¦çš„é‡å¤æ¸²æŸ“ï¼Ÿ**
>
> - **è§£ç­”**ï¼šä½¿ç”¨React.memoå¯¹èœå•é¡¹è¿›è¡Œè®°å¿†åŒ–ï¼Œé¿å…éå¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚ä½¿ç”¨useCallbackåŒ…è£¹äº‹ä»¶å¤„ç†å™¨ï¼Œç¡®ä¿å‡½æ•°å¼•ç”¨çš„ç¨³å®šã€‚æ­¤å¤–ï¼ŒçŠ¶æ€åº”æœ€å°åŒ–ï¼Œä¾‹å¦‚åˆ†ç¦»åŠ¨æ€è®¡ç®—çš„æ ·å¼å’Œé™æ€é…ç½®ï¼Œé¿å…æ•´ä½“çŠ¶æ€çš„é¢‘ç¹å˜åŠ¨ã€‚
>
> **4. ä»£ç ä¸­çš„menuOptionsç»“æ„å¦‚ä½•æ”¯æŒåŠ¨æ€é…ç½®ï¼Ÿå¦‚æœéœ€è¦ä»APIè·å–èœå•é¡¹ï¼Œåº”å¦‚ä½•ä¿®æ”¹ï¼Ÿ**
>
> - **åˆ†æä»£ç **ï¼šå½“å‰menuOptionsæ˜¯é™æ€å¯¹è±¡ï¼Œä½†ç»“æ„å…è®¸åµŒå¥—ã€‚åŠ¨æ€é…ç½®å¯ä»APIè·å–æ•°æ®åï¼Œè½¬æ¢ä¸ºç›¸åŒçš„ç»“æ„ï¼Œå¹¶è®¾ç½®åˆ°useStateä¸­ã€‚å¯èƒ½éœ€è¦å¤„ç†å¼‚æ­¥åŠ è½½çŠ¶æ€ï¼Œå¹¶åœ¨æ•°æ®åˆ°æ¥åæ›´æ–°menuOptionsçŠ¶æ€ã€‚
>
> **5. åœ¨handleMenuClickä¸­è°ƒç”¨canvasEditorçš„æ–¹æ³•æ—¶ï¼Œå¦‚ä½•ç¡®ä¿å…¶å­˜åœ¨ï¼Ÿè‹¥å¼‚æ­¥åŠ è½½canvasEditorï¼Œåº”å¦‚ä½•å¤„ç†ï¼Ÿ**
>
> - **è§£ç­”**ï¼šä»£ç ä¸­ä½¿ç”¨å¯é€‰é“¾æ“ä½œç¬¦ï¼ˆcanvasEditor?.method()ï¼‰é˜²æ­¢æœªå®šä¹‰é”™è¯¯ã€‚è‹¥canvasEditorå¼‚æ­¥åŠ è½½ï¼Œéœ€åœ¨çŠ¶æ€ä¸­ç®¡ç†å…¶å¯ç”¨æ€§ï¼Œä¾‹å¦‚ä½¿ç”¨useStateå’ŒuseEffectè¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶åœ¨åŠ è½½å®Œæˆåå†å…è®¸èœå•æ“ä½œã€‚
>
> **6. å¦‚ä½•æ£€æµ‹å³é”®ç‚¹å‡»äº‹ä»¶ï¼Ÿä»£ç ä¸­çš„button === 3æ˜¯å¦æ­£ç¡®ï¼Ÿ**
>
> - **å¸¸è§é”™è¯¯**ï¼šä¸åŒæµè§ˆå™¨å¯èƒ½å¯¹å³é”®çš„buttonå€¼ä¸åŒã€‚é€šå¸¸æ ‡å‡†å³é”®æ˜¯buttonä¸º2ï¼ˆä½†æ—§ç‰ˆIEå¯èƒ½ä¸åŒï¼‰ã€‚ä»£ç ä¸­ä½¿ç”¨3å¯èƒ½é”™è¯¯ï¼Œåº”æ¢ä¸º2ã€‚
>
> - **ä¿®æ­£**ï¼šåœ¨handleMouseUpä¸­æ£€æŸ¥event.button === 2ã€‚æˆ–è€…ä½¿ç”¨contextmenuäº‹ä»¶ï¼Œä½†å…¶é»˜è®¤è¡Œä¸ºéœ€è¢«é˜»æ­¢ã€‚
>
> **7. å¦‚ä½•å¤„ç†èœå•å¤–çš„ç‚¹å‡»å…³é—­ï¼Ÿç°æœ‰ä»£ç æ˜¯å¦è¦†ç›–æ­¤æƒ…å†µï¼Ÿ**
>
> - **åˆ†æä»£ç **ï¼šå½“å‰ç›‘å¬mouseupäº‹ä»¶ï¼Œå¦‚æœè§¦å‘äº‹ä»¶çš„ä¸æ˜¯èœå•æœ¬èº«ï¼Œåˆ™éšè—ã€‚å¯èƒ½éœ€è¦ä½¿ç”¨useRefå¼•ç”¨èœå•å…ƒç´ ï¼Œæ£€æŸ¥äº‹ä»¶ç›®æ ‡æ˜¯å¦åœ¨èœå•å†…éƒ¨æˆ–å¤–éƒ¨ï¼Œè‹¥æœ‰å¤–éƒ¨ç‚¹å‡»åˆ™å…³é—­ã€‚
>
> **8. åœ¨è°ƒæ•´å›¾å±‚é¡ºåºæ—¶ï¼Œä¸ºä½•éœ€è¦è°ƒç”¨stopSaveHistoryå’ŒstartSaveHistoryï¼Ÿ**
>
> - **è§£ç­”**ï¼šå¯èƒ½æ˜¯canvasEditorçš„äº‹åŠ¡ç®¡ç†ï¼Œé˜²æ­¢å¤šæ¬¡å†å²è®°å½•ã€‚ä¾‹å¦‚ï¼Œç§»åŠ¨å›¾å±‚å¯èƒ½éœ€è¦å¤šä¸ªæ­¥éª¤ï¼Œä½†åªéœ€ä½œä¸ºä¸€ä¸ªå†å²è®°å½•é¡¹ï¼Œæ•…åœ¨è¿™äº›æ“ä½œå‰åæš‚åœå†å²è®°å½•ï¼Œå®Œæˆåå†æ¢å¤å¹¶ä¿å­˜ä¸€æ¬¡ã€‚
>
> **9. ä»£ç ä¸­çš„eventå¯¹è±¡æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°åœ¨ç»„ä»¶é—´çš„äº‹ä»¶é€šä¿¡ï¼Ÿ**
>
> - **è§£ç­”**ï¼šå¯èƒ½ä½¿ç”¨äº†ä¸€ä¸ªå…¨å±€äº‹ä»¶æ€»çº¿æˆ–ä¸Šä¸‹æ–‡APIï¼ˆå¦‚createContextï¼‰ï¼Œæˆ–è€…ç¬¬ä¸‰æ–¹åº“å¦‚EventEmitterã€‚åœ¨Reactä¸­æ›´æ¨èä½¿ç”¨ä¸Šä¸‹æ–‡æˆ–çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚Reduxï¼‰è¿›è¡Œè·¨ç»„ä»¶é€šä¿¡ã€‚ä¾‹å¦‚ï¼Œåœ¨å®Œæˆæ“ä½œåå‘é€äº‹ä»¶ï¼Œå…¶ä»–ç»„ä»¶ç›‘å¬å¹¶å“åº”ã€‚
>
> **10. å¦‚ä½•å¤„ç†èœå•é¡¹çš„åŠ¨æ€ç¦ç”¨çŠ¶æ€ï¼Ÿä¾‹å¦‚ï¼Œæ²¡æœ‰é€‰ä¸­å…ƒç´ æ—¶ç¦ç”¨æŸäº›é€‰é¡¹ã€‚**
>
> - **æ”¹è¿›å»ºè®®**ï¼šåœ¨menuOptionsçš„é…ç½®ä¸­å¢åŠ disabledå­—æ®µï¼Œè¯¥å­—æ®µå¯ä»¥æ˜¯å‡½æ•°æˆ–å¸ƒå°”å€¼ï¼Œæ ¹æ®å½“å‰canvasEditorçš„çŠ¶æ€ï¼ˆå¦‚æ˜¯å¦æœ‰é€‰ä¸­å…ƒç´ ï¼‰åŠ¨æ€è®¡ç®—ã€‚åœ¨æ¸²æŸ“èœå•é¡¹æ—¶ï¼Œåº”ç”¨disabledæ ·å¼å¹¶é˜»æ­¢ç‚¹å‡»äº‹ä»¶ã€‚
>
> **11. åœ¨å¤šçº§å­èœå•çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•ç®¡ç†å®ƒä»¬çš„æ˜¾ç¤ºå’Œéšè—çŠ¶æ€ï¼Ÿç°æœ‰ä»£ç æ˜¯å¦èƒ½æ”¯æŒï¼Ÿ**
>
> - **åˆ†æä»£ç **ï¼šå½“å‰æ¯ä¸ªå­èœå•é¡¹å¯èƒ½æœ‰è‡ªå·±çš„showStyleï¼Œä½†å¦‚æœåœ¨å¤šä¸ªå±‚çº§é—´åˆ‡æ¢ï¼Œå¯èƒ½éœ€è¦é€’å½’æˆ–ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†ã€‚ç°æœ‰ç»“æ„å¯èƒ½åªå¤„ç†ä¸€çº§å­èœå•ï¼Œæ›´æ·±å±‚çº§éœ€æ‰©å±•çŠ¶æ€å¤„ç†ï¼Œä¾‹å¦‚åµŒå¥—çš„showChildMenuçŠ¶æ€ã€‚
>
> é€šè¿‡ä»¥ä¸Šé—®é¢˜ï¼Œé¢è¯•å®˜å¯ä»¥è€ƒå¯Ÿåº”è˜è€…å¯¹Reactç»„ä»¶è®¾è®¡ã€äº‹ä»¶å¤„ç†ã€æ€§èƒ½ä¼˜åŒ–ã€åŠ¨æ€UIç®¡ç†å’Œä¸å¤–éƒ¨åº“é›†æˆçš„ç†è§£ã€‚è§£ç­”æ—¶éœ€ç»“åˆä»£ç ç»†èŠ‚ï¼Œå±•ç¤ºå¯¹æŠ€æœ¯ç»†èŠ‚çš„æŒæ¡åŠè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚
>
> 



### **æŠ€æœ¯éš¾ç‚¹åˆ†æä¸ä¼˜åŒ–æ–¹æ¡ˆ**

---

#### **1. ç²¾å‡†è§†å£å®šä½ (æ ¸å¿ƒéš¾ç‚¹)**  
**æŠ€æœ¯æŒ‘æˆ˜**ï¼š  
- åŠ¨æ€è®¡ç®—èœå•å‡ºç°ä½ç½®ï¼ˆä¸»èœå•+åµŒå¥—å­èœå•ï¼‰  
- å¤šå±å¹•åˆ†è¾¨ç‡é€‚é…  
- æ»šåŠ¨å®¹å™¨/transform çˆ¶å…ƒç´ åœºæ™¯ä¸‹çš„åæ ‡æ¢ç®—  

**è§£å†³æ–¹æ¡ˆç¤ºä¾‹**ï¼š  
```javascript
// è·å–è®¾å¤‡å¯è§†åŒºå°ºå¯¸ï¼ˆå…¼å®¹ç§»åŠ¨ç«¯ï¼‰
const viewportWidth = document.documentElement.clientWidth
const viewportHeight = document.documentElement.clientHeight

// ä½¿ç”¨ç°ä»£ API è·å–å…ƒç´ å®é™…æ¸²æŸ“å°ºå¯¸
const menuRect = menuRef.current.getBoundingClientRect()
const safetyMargin = 10 // å®‰å…¨è¾¹è·

// æ™ºèƒ½ä½ç½®ä¿®æ­£ç®—æ³•
const adjustPosition = (position, elementSize, viewportSize) => {
  return position + elementSize > viewportSize 
    ? viewportSize - elementSize - safetyMargin 
    : position
}
```

---

#### **2. åµŒå¥—èœå•è”åŠ¨å®šä½ (å¤æ‚ç‚¹)**  
**å…¸å‹é¢è¯•é—®é¢˜**ï¼šå¦‚ä½•å®ç°ä¸‰çº§ä»¥ä¸ŠåµŒå¥—èœå•çš„å®šä½ï¼Ÿ  

**è§£å†³æ–¹æ¡ˆ**ï¼š  
```javascript
// é€’å½’å¤„ç†å­èœå•ä½ç½®
const calcNestedPosition = (parentRect, depth) => {
  const directions = ['right', 'left', 'up', 'down']
  return directions.map(dir => {
    const baseOffset = depth * 10 // è§†è§‰å±‚çº§åˆ†éš”
    return {
      direction: dir,
      position: calculateEdgePosition(parentRect, dir, baseOffset)
    }
  })
}
```

---

#### **3. æ€§èƒ½ä¼˜åŒ– (é«˜é¢‘è€ƒç‚¹)**  
**å…¸å‹é¢è¯•é—®é¢˜**ï¼šå½“èœå•åŒ…å«1000+é¡¹æ—¶å¦‚ä½•ä¼˜åŒ–æ€§èƒ½ï¼Ÿ

**ä¼˜åŒ–ç­–ç•¥ä¸ä»£ç **ï¼š  
```javascript
// è™šæ‹Ÿæ»šåŠ¨å®ç°å…³é”®ä»£ç 
const VirtualMenu = ({ items }) => {
  const [scrollTop, setScrollTop] = useState(0)
  const containerHeight = 300
  const itemHeight = 30
  const visibleCount = Math.ceil(containerHeight / itemHeight)

  const startIdx = Math.floor(scrollTop / itemHeight)
  const endIdx = startIdx + visibleCount + 2

  return (
    <div 
      style={{ height: containerHeight }} 
      onScroll={e => setScrollTop(e.target.scrollTop)}
    >
      <div style={{ height: items.length * itemHeight }}>
        {items.slice(startIdx, endIdx).map((item, i) => (
          <div 
            key={item.id} 
            style={{ 
              height: itemHeight,
              transform: `translateY(${startIdx * itemHeight}px)` 
            }}
          >
            {item.label}
          </div>
        ))}
      </div>
    </div>
  )
}
```

---

#### **4. èœå•çŠ¶æ€ç®¡ç† (Redux/Contextåº”ç”¨)**  
**å…¸å‹é¢è¯•é—®é¢˜**ï¼šå¦‚ä½•è®¾è®¡èœå•çš„çŠ¶æ€ç®¡ç†æ¶æ„ï¼Ÿ

**è§£å†³æ–¹æ¡ˆæ¶æ„**ï¼š  
```javascript
// è‡ªå®šä¹‰ Hook æ–¹æ¡ˆ
const useMenuState = () => {
  const [menuState, dispatch] = useReducer(reducer, initialState)
  
  const openMenu = (payload) => 
    dispatch({ type: 'OPEN', payload })
  
  const closeMenu = () => 
    dispatch({ type: 'CLOSE' })

  return { menuState, openMenu, closeMenu }
}

// Context é›†æˆ
const MenuProvider = ({ children }) => {
  const value = useMenuState()
  return (
    <MenuContext.Provider value={value}>
      {children}
    </MenuContext.Provider>
  )
}
```

---

### **æœŸå…¸å‹é¢è¯•é¢˜ Q&A**  

---

#### **Q1ï¼šå¦‚ä½•é˜»æ­¢æµè§ˆå™¨é»˜è®¤å³é”®èœå•ï¼Ÿæœ‰å“ªäº›å…¼å®¹æ€§æ³¨æ„äº‹é¡¹ï¼Ÿ**  
**è§£ç­”**ï¼š  
```javascript
// æ¨èè§£å†³æ–¹æ¡ˆ
const handleContextMenu = (e) => {
  e.preventDefault() // ç¦ç”¨é»˜è®¤èœå•
  e.stopPropagation()
}

// å…¼å®¹æ€§å¤„ç†
document.addEventListener('contextmenu', handleContextMenu, false)
// è€æ—§æµè§ˆå™¨å¯èƒ½éœ€è¦ return false
```

**é¢è¯•è¦ç‚¹**ï¼š  
- `e.preventDefault()` çš„æµè§ˆå™¨æ”¯æŒåº¦  
- passive event listeners çš„å½±å“  
- ç§»åŠ¨ç«¯é•¿æŒ‰äº‹ä»¶çš„å†²çªå¤„ç†  

---

#### **Q2ï¼šå¦‚ä½•å®ç°èœå•çš„åŠ¨ç”»è¿‡æ¸¡æ•ˆæœï¼Ÿéœ€è¦è€ƒè™‘å“ªäº›æ€§èƒ½é—®é¢˜ï¼Ÿ**  
**æ·±åº¦è§£ç­”**ï¼š  
```javascript
// CSS ç¡¬ä»¶åŠ é€Ÿä¼˜åŒ–æ–¹æ¡ˆ
.menu-item {
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transform: translateZ(0); // è§¦å‘ GPU åŠ é€Ÿ
}

// JavaScript åŠ¨ç”»æ–¹æ¡ˆï¼ˆrequestAnimationFrameï¼‰
const animateMenu = (element, start, end) => {
  let startTime = null
  const duration = 300
  
  const step = (timestamp) => {
    if (!startTime) startTime = timestamp
    const progress = timestamp - startTime
    const percentage = Math.min(progress / duration, 1)
    
    const currentPos = start + (end - start) * percentage
    element.style.transform = `translateX(${currentPos}px)`
    
    if (percentage < 1) requestAnimationFrame(step)
  }
  
  requestAnimationFrame(step)
}
```

**ä¼˜åŒ–å…³æ³¨ç‚¹**ï¼š  
- é¿å…é¢‘ç¹é‡ç»˜/å›æµ  
- åˆç†ä½¿ç”¨ will-change å±æ€§  
- åŠ¨ç”»å¸§ç‡ä¸æ€§èƒ½çš„å¹³è¡¡  

---

#### **Q3ï¼šå¦‚ä½•å®ç°èœå•çš„é”®ç›˜å¯¼èˆªåŠŸèƒ½ï¼Ÿ**  
**è§£å†³æ–¹æ¡ˆ**ï¼š  
```javascript
// é”®ç›˜äº‹ä»¶å¤„ç†ï¼ˆæ”¯æŒæ–¹å‘é”®å¯¼èˆªï¼‰
const handleKeyDown = (e) => {
  const currentIndex = focusedIndex
  switch(e.key) {
    case 'ArrowDown':
      e.preventDefault()
      setFocusedIndex((prev) => (prev + 1) % menuItems.length)
      break;
    case 'ArrowUp':
      e.preventDefault()
      setFocusedIndex((prev) => 
        prev === 0 ? menuItems.length - 1 : prev - 1
      )
      break;
    case 'Enter':
      handleMenuItemClick(menuItems[currentIndex])
      break;
  }
}

// æ— éšœç¢æ”¯æŒå¢å¼º
<div role="menu" aria-label="æ“ä½œèœå•">
  {menuItems.map((item, index) => (
    <div 
      role="menuitem"
      tabIndex={0}
      aria-disabled={item.disabled}
      onKeyDown={handleKeyDown}
    >
      {item.label}
    </div>
  ))}
</div>
```

**è€ƒå¯Ÿé‡ç‚¹**ï¼š  
- WAI-ARIA è§„èŒƒçš„åº”ç”¨  
- ç„¦ç‚¹ç®¡ç†ç­–ç•¥  
- æ— éšœç¢æµ‹è¯•æ–¹æ³•  

---

### **é«˜çº§è€ƒæ ¸æ–¹å‘**  

| è€ƒå¯Ÿç»´åº¦ | æ·±åº¦é—®é¢˜ç¤ºä¾‹ | è¯„åˆ¤æ ‡å‡† |
|---------|-------------|---------|
| **æ•°æ®ç»“æ„è®¾è®¡** | å¦‚ä½•è®¾è®¡æ”¯æŒæ— é™çº§åµŒå¥—çš„èœå•æ•°æ®ç»“æ„ï¼Ÿ | æ ‘å½¢ç»“æ„çš„åº”ç”¨èƒ½åŠ› |
| **è®¾è®¡æ¨¡å¼åº”ç”¨** | å¦‚ä½•ç”¨å¤åˆæ¨¡å¼å®ç°ä¸åŒç±»å‹çš„èœå•é¡¹ï¼Ÿ | æ¨¡å¼åº”ç”¨ç†è§£æ·±åº¦ |
| **æ¨¡å—è§£è€¦** | å¦‚æœå°†èœå•å®šä½é€»è¾‘æŠ½è±¡ä¸ºç‹¬ç«‹æœåŠ¡ï¼Ÿ | æ¶æ„è®¾è®¡èƒ½åŠ› |
| **TypeScript** | å¦‚ä½•è®¾è®¡é€šç”¨ç±»å‹æ³›å‹æ¥å£ï¼Ÿ | ç±»å‹ç³»ç»ŸæŒæ¡ç¨‹åº¦ |
| **æ€§èƒ½å‰–æ** | å¦‚ä½•åˆ†æèœå•çš„æ»šåŠ¨å¡é¡¿é—®é¢˜ï¼Ÿ | æ€§èƒ½ä¼˜åŒ–æ–¹æ³•è®º |

---

**ç¤ºä¾‹é¢˜è§£ - æ ‘å½¢èœå•è®¾è®¡**ï¼š  
```typescript
// ç±»å‹å®šä¹‰
interface BaseMenuItem {
  id: string;
  label: string;
  disabled?: boolean;
}

interface ActionItem extends BaseMenuItem {
  type: 'action';
  handler: () => void;
}

interface SubmenuItem extends BaseMenuItem {
  type: 'submenu';
  children: MenuItem[];
}

interface CheckboxItem extends BaseMenuItem {
  type: 'checkbox';
  checked: boolean;
}

type MenuItem = ActionItem | SubmenuItem | CheckboxItem

// ä½¿ç”¨ç¤ºä¾‹
const menuData: MenuItem[] = [
  {
    type: 'action',
    id: 'copy',
    label: 'å¤åˆ¶',
    handler: () => console.log('Copy')
  },
  {
    type: 'submenu',
    id: 'advanced',
    label: 'é«˜çº§é€‰é¡¹',
    children: [
      // åµŒå¥—ç»“æ„
    ]
  }
]
```

---

å¸Œæœ›è¿™ä»½è¯¦å°½çš„è§£æèƒ½å……åˆ†å±•ç¤ºä½ å¯¹Reactç»„ä»¶å¼€å‘æ·±å±‚åŸç†çš„ç†è§£ï¼Œå¦‚æœéœ€è¦ç‰¹å®šé¢†åŸŸçš„è¿›ä¸€æ­¥æ‰©å±•ï¼Œå¯éšæ—¶æå‡ºï¼
