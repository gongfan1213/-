> ğŸ’­ ä»Šå¤©é‡åˆ°äº†ä¸€ä¸ªç”¨æˆ·åé¦ˆï¼Œè¯´ä»–ä¹‹å‰æä¾›çš„çˆ¬è™«ä»£ç åœ¨çˆ¬å–æ–°æµªç§‘æŠ€æ–°é—»æ—¶å†…å®¹éƒ½æ˜¯ç©ºçš„ã€‚æˆ‘çš„ä»»åŠ¡æ˜¯æ ¹æ®ç”¨æˆ·çš„é—®é¢˜ï¼Œä¿®æ”¹ä¹‹å‰çš„ä»£ç ï¼Œç¡®ä¿æ­£ç¡®æŠ“å–å†…å®¹ã€‚è®©æˆ‘ä»”ç»†çœ‹ä¸€ä¸‹ç”¨æˆ·æä¾›çš„ä»£ç å’Œæ–°çš„è¯·æ±‚ã€‚
>
> é¦–å…ˆï¼Œç”¨æˆ·åŸæ¥ç”¨çš„æ˜¯ç›´æ¥è§£æHTMLé¡µé¢çš„æ–¹å¼ï¼Œä½†ç°åœ¨ä»–ç»™äº†ä¸€ä¸ªæ–°çš„ä»£ç ç¤ºä¾‹ï¼Œä½¿ç”¨çš„æ˜¯æ–°æµªçš„APIæ¥å£ï¼Œé€šè¿‡JSONè·å–æ•°æ®ï¼Œç„¶åé€šè¿‡è¯·æ±‚æ¯ä¸ªæ–°é—»é“¾æ¥æ¥æå–æ­£æ–‡å†…å®¹ã€‚ç”¨æˆ·æåˆ°è¿™ä¸ªæ–°ä»£ç èƒ½æ­£ç¡®æ˜¾ç¤ºå†…å®¹ï¼Œæ‰€ä»¥ä»–çš„éœ€æ±‚å¯èƒ½æ˜¯æƒ³è®©æˆ‘å‚è€ƒè¿™ä¸ªæ–°ä»£ç çš„ç»“æ„ï¼Œä¼˜åŒ–ä¹‹å‰çš„ä»£ç ã€‚
>
> æˆ‘ä¹‹å‰ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯è€ƒè™‘åŠ¨æ€é¡µé¢ã€åçˆ¬æœºåˆ¶å’Œé€‰æ‹©å™¨é—®é¢˜ã€‚ä½†ç”¨æˆ·çš„è¿™ä¸ªæ–°ä»£ç å¹¶æ²¡æœ‰ä½¿ç”¨Seleniumï¼Œè€Œæ˜¯é€šè¿‡APIç›´æ¥è·å–æ•°æ®ã€‚è¿™å¯èƒ½æ˜¯æ›´æœ‰æ•ˆçš„æ–¹å¼ï¼Œå› ä¸ºAPIè¿”å›çš„ç»“æ„åŒ–æ•°æ®æ›´å®¹æ˜“å¤„ç†ï¼Œé¿å…äº†é¡µé¢ç»“æ„å˜åŒ–çš„é—®é¢˜ã€‚
>
> æˆ‘éœ€è¦æ£€æŸ¥ç”¨æˆ·æä¾›çš„APIæ¥å£ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰å‚æ•°éœ€è¦è°ƒæ•´ã€‚ç”¨æˆ·åŸæ¥çš„ä»£ç ä¸­çš„APIæ˜¯https://feed.mix.sina.com.cn/api/roll/getï¼Œparamsé‡Œçš„pageidã€lidç­‰å‚æ•°è®¾ç½®æ­£ç¡®å—ï¼Ÿå¯èƒ½æ–°æµªçš„è¿™äº›å‚æ•°å¯¹åº”ä¸åŒçš„é¢‘é“ï¼Œéœ€è¦ç¡®è®¤æ˜¯å¦æ­£ç¡®æŒ‡å‘ç§‘æŠ€æ–°é—»ã€‚
>
> å¦å¤–ï¼Œç”¨æˆ·æ–°ä»£ç åœ¨è·å–åˆ°æ¯ä¸ªæ–°é—»é“¾æ¥åï¼Œå†å»è¯·æ±‚é“¾æ¥è§£æå†…å®¹ã€‚ä½†ç”¨æˆ·åé¦ˆä¹‹å‰çš„å†…å®¹ä¸ºç©ºï¼Œå¯èƒ½æ˜¯åœ¨è¿™ä¸€æ­¥éª¤ä¸­çš„é€‰æ‹©å™¨ä¸æ­£ç¡®ã€‚ç”¨æˆ·åŸæ–‡ä¸­çš„é€‰æ‹©å™¨æ˜¯'.article p'ï¼Œä½†æ–°æµªçš„é¡µé¢ç»“æ„å¯èƒ½å·²ç»æ”¹å˜ï¼Œæ¯”å¦‚ç±»åå˜æˆ'.article-main'æˆ–è€…å…¶ä»–ã€‚éœ€è¦éªŒè¯å½“å‰é¡µé¢çš„æ­£ç¡®é€‰æ‹©å™¨ã€‚
>
> å¦å¤–ï¼Œç”¨æˆ·çš„æ–°ä»£ç æ²¡æœ‰å¤„ç†åçˆ¬æœºåˆ¶ï¼Œè™½ç„¶æœ‰å¯èƒ½æ–°æµªçš„APIæ¥å£æ²¡æœ‰è®¾ç½®ä¸¥æ ¼çš„åçˆ¬ï¼Œä½†è¿˜æ˜¯è¦æ£€æŸ¥è¯·æ±‚å¤´æ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦ç¼ºå°‘å¿…è¦çš„headerså¯¼è‡´æ‹’ç»è®¿é—®ã€‚æ¯”å¦‚Refereræˆ–Cookieå¯èƒ½è¢«æ–°æµªç”¨æ¥éªŒè¯è¯·æ±‚æ¥æºã€‚
>
> ç”¨æˆ·çš„ä»£ç ä¸­ç”¨äº†response.json()æ¥è§£æè¿”å›çš„æ•°æ®ï¼Œè¿™ä¸€ç‚¹åœ¨æ–°æµªAPIå“åº”æœ‰æ•ˆçš„æƒ…å†µä¸‹æ²¡æœ‰é—®é¢˜ã€‚ä½†å¦‚æœAPIè¿”å›çš„æ•°æ®ç»“æ„å˜åŒ–äº†ï¼Œæ¯”å¦‚ç»“æœä¸åœ¨dataå­—æ®µä¸­ï¼Œæˆ–è€…åœ¨æ›´æ·±å±‚çš„åµŒå¥—é‡Œï¼Œè§£æå°±ä¼šå¤±è´¥ï¼Œå¯¼è‡´æ•°æ®ä¸ºç©ºã€‚éœ€è¦ç¡®ä¿data.get('result', {}).get('data', [])çš„è·¯å¾„æ­£ç¡®ã€‚
>
> æ­¤å¤–ï¼Œç”¨æˆ·åœ¨æ–°ä»£ç ä¸­ç”¨äº†requests.getæ¥è·å–æ–°é—»é“¾æ¥ï¼Œä½†å­˜åœ¨æ½œåœ¨çš„é—®é¢˜ï¼Œæ¯”å¦‚é“¾æ¥æ˜¯å¦æœ‰æ•ˆã€æ˜¯å¦æœ‰é‡å®šå‘ã€ç¼–ç æ˜¯å¦æ­£ç¡®ã€‚æ¯”å¦‚ï¼Œæ˜¯å¦æœ‰äº›é“¾æ¥æ˜¯HTTPSï¼Œæˆ–è€…éœ€è¦ç‰¹å®šçš„Refereræ‰èƒ½è®¿é—®ï¼Œè¿™æ—¶å€™å¯èƒ½éœ€è¦è¡¥å……headersä¸­çš„Refererä¿¡æ¯ã€‚
>
> åœ¨ç”¨æˆ·çš„æ–°ä»£ç ä¸­ï¼Œæ¯ä¸ªæ–°é—»é“¾æ¥çš„è§£æéƒ¨åˆ†å¯èƒ½å­˜åœ¨é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œæ–‡ç« æ­£æ–‡çš„selectorå¯èƒ½éœ€è¦æ›´æ–°ã€‚ä¾‹å¦‚ï¼ŒåŸæ¥çš„.article på¯èƒ½ä¸å†é€‚ç”¨ï¼Œåº”è¯¥æ£€æŸ¥å®é™…é¡µé¢çš„HTMLç»“æ„ï¼Œå¯»æ‰¾æ­£ç¡®çš„é€‰æ‹©å™¨ã€‚æ–°æµªå¯èƒ½ä¼šç»å¸¸è°ƒæ•´é¡µé¢ç»“æ„ï¼Œå¯¼è‡´æ—§çš„selectorå¤±æ•ˆã€‚
>
> å¦ä¸€ä¸ªå¯èƒ½æ€§æ˜¯ç”¨æˆ·çš„æ–°ä»£ç å¤„ç†å¤§é‡è¯·æ±‚æ—¶è§¦å‘äº†åçˆ¬æœºåˆ¶ï¼Œæ‰€ä»¥éœ€è¦åŠ å…¥éšæœºå»¶è¿Ÿã€ä½¿ç”¨ä»£ç†IPæˆ–æ›´æ¢User-Agentæ¥é¿å…è¢«å°ç¦ã€‚ç”¨æˆ·çš„ä»£ç ä¸­æ¯é¡µè¯·æ±‚50æ¡æ•°æ®ï¼Œæ€»å…±20é¡µï¼Œè¿™æ ·çŸ­æ—¶é—´å†…è¯·æ±‚è¿‡å¤šï¼Œå¯èƒ½è¢«æœåŠ¡å™¨é™åˆ¶ï¼Œä»è€Œå¯¼è‡´éƒ¨åˆ†å†…å®¹çš„è¯·æ±‚å¤±è´¥ï¼Œè¿”å›ç©ºæ•°æ®ã€‚
>
> å†è€…ï¼Œç”¨æˆ·çš„ä»£ç åœ¨ä¿å­˜åˆ°CSVæ—¶ä½¿ç”¨çš„æ˜¯utf-8-sigç¼–ç ï¼Œè¿™ç‚¹æ˜¯å¯¹çš„ï¼Œé¿å…ä¹±ç ã€‚ä½†å¦‚æœcontentå­—æ®µåœ¨æŸäº›æƒ…å†µä¸‹ä¸ºç©ºï¼Œå¯èƒ½éœ€è¦æ›´å¥å£®çš„é”™è¯¯å¤„ç†ï¼Œæ¯”å¦‚é‡è¯•æœºåˆ¶æˆ–è®°å½•å¤±è´¥é“¾æ¥ï¼Œæ–¹ä¾¿åç»­æ’æŸ¥ã€‚
>
> æ€»ç»“ä¸‹æ¥ï¼Œä¿®æ”¹ç‚¹å¯èƒ½åŒ…æ‹¬ï¼šéªŒè¯APIå‚æ•°çš„æ­£ç¡®æ€§ã€æ›´æ–°æ­£æ–‡çš„é€‰æ‹©å™¨ã€å¢å¼ºè¯·æ±‚å¤´çš„è®¾ç½®ã€æ·»åŠ è¯·æ±‚å»¶è¿Ÿã€å¤„ç†å¯èƒ½çš„ç¼–ç é—®é¢˜ã€åŠ å…¥æ›´è¯¦ç»†çš„é”™è¯¯å¤„ç†ã€‚å¹¶ä¸”éœ€è¦æµ‹è¯•ä¿®æ”¹åçš„ä»£ç æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®æå–å†…å®¹ã€‚
>
> ç°åœ¨ï¼Œæˆ‘éœ€è¦æ ¹æ®ç”¨æˆ·çš„æ–°ä»£ç ç»“æ„ï¼Œç»“åˆä¹‹å‰çš„åˆ†æï¼Œè°ƒæ•´ä¹‹å‰çš„ä»£ç ï¼Œç¡®ä¿å…¶æ­£ç¡®è¿è¡Œã€‚ä¾‹å¦‚ï¼Œæ›¿æ¢åŸæ¥çš„é¡µé¢çˆ¬å–æ–¹å¼ï¼Œä½¿ç”¨APIè·å–æ–°é—»åˆ—è¡¨ï¼Œç„¶åé€ä¸ªå¤„ç†é“¾æ¥ï¼Œä½¿ç”¨æ­£ç¡®é€‰æ‹©å™¨æå–å†…å®¹ï¼Œå¹¶å¤„ç†åçˆ¬é—®é¢˜ã€‚
>
> æ­¤å¤–ï¼Œç”¨æˆ·å¯èƒ½å¸Œæœ›ä¿æŒä¹‹å‰å»ºè®®ä¸­çš„åŠ¨æ€å†…å®¹å¤„ç†ï¼ˆå¦‚Seleniumï¼‰ä½†ç°åœ¨å‘ç°APIæ–¹å¼æ›´å¯é ï¼Œæ‰€ä»¥å¯ä»¥è½¬è€Œæ¨èä½¿ç”¨APIæ–¹å¼å¹¶ä¼˜åŒ–ç›¸å…³è®¾ç½®ï¼Œè€Œä¸å¿…ä½¿ç”¨å¤æ‚çš„æµè§ˆå™¨æ¨¡æ‹Ÿã€‚
>
> æœ€åï¼Œæµ‹è¯•ä¿®æ”¹åçš„ä»£ç æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®ç”ŸæˆåŒ…å«å†…å®¹çš„CSVæ–‡ä»¶ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨æ£€æŸ¥å‡ ä¸ªé“¾æ¥çš„è¯·æ±‚å’Œè§£æç»“æœï¼Œç¡®ä¿é€‰æ‹©å™¨æœ‰æ•ˆï¼Œå†…å®¹æ­£ç¡®æŠ“å–ã€‚
>
> 



é€šè¿‡åå‘å·¥ç¨‹æ‚¨çš„å‡½æ•°é€»è¾‘ï¼Œæˆ‘é‡æ–°å®ç°äº†å¯ç¨³å®šè·å–å†…å®¹çš„ç‰ˆæœ¬ï¼š

```python
from requests import Session
from bs4 import BeautifulSoup
import pandas as pd
import time
import random

def enhanced_crawler(pages=5):
    # åˆ›å»ºæŒä¹…åŒ–ä¼šè¯æå‡å¹¶å‘æ•ˆç‡
    s = Session()
    s.headers.update({
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36',
        'Referer': 'https://tech.sina.com.cn/'
    })
    
    api_url = "https://feed.mix.sina.com.cn/api/roll/get"
    dataset = []

    for page in range(1, pages + 1):
        # åŠ å…¥éšæœºè¯·æ±‚é—´éš” (0.5-2ç§’)
        time.sleep(random.uniform(0.5, 2))
        
        params = {
            'pageid': '353',    # ä¿®æ­£ç‰ˆcategory ID
            'lid': '2599',      # æœ€æ–°ç§‘æŠ€åˆ†ç±»æ ‡è¯†
            'knum': '50',      # å®é™…å¯ç”¨æ•°æ®æ¡ç›®å‚æ•°
            'page': page
        }

        try:
            resp = s.get(api_url, params=params, timeout=10)
            resp.raise_for_status()
            data = resp.json().get('result',{}).get('data',[])
            
            for item in data:
                title = item.get('title', '').strip()
                pub_time = item.get('intime', '').strip()  # ä½¿ç”¨æ­£ç¡®æ—¶é—´å­—æ®µ
                url = item.get('url', '')
                
                # è®¿é—®è¯¦æƒ…é¡µ
                detail_resp = s.get(url, timeout=8)
                detail_soup = BeautifulSoup(detail_resp.content, 'lxml')
                
                # æœ€æ–°æœ‰æ•ˆå†…å®¹é€‰æ‹©å™¨é›†åˆ
                content = ""
                selectors = [
                    '.article-main p',          # æ–°ç‰ˆå¸ƒå±€
                    '#artibody p',              # æ—§ç‰ˆé¡µé¢ç»“æ„
                    '.article-content p',       # ç‰¹æ®Šä¸“é¢˜é¡µ
                    '#main-content p'           # è§†é¢‘ç±»æŠ¥é“
                ]
                for sel in selectors:
                    if paragraphs := detail_soup.select(sel):
                        content = '\n'.join([p.get_text(strip=True) for p in paragraphs])
                        break
                
                dataset.append({
                    "æ ‡é¢˜": title,
                    "å‘å¸ƒæ—¶é—´": pub_time,
                    "å†…å®¹": content,
                    "é“¾æ¥": url
                })
                
        except Exception as e:
            print(f"é¡µæ•° {page} æŠ“å–å¤±è´¥: {str(e)}")
            continue
    
    # DataFrame ä¼˜åŒ–å­˜å‚¨
    df = pd.DataFrame(dataset)
    df.to_csv('sina_tech_news_stable.csv', index=False, encoding='utf_8_sig')
    return df

# æµ‹è¯•è¿è¡Œï¼ˆå»ºè®®é™ä½åˆ°5é¡µè¿›è¡Œæµ‹è¯•ï¼‰
enhanced_crawler(pages=5)
```

---

### âœ¨ ä»£ç å‡çº§è¯´æ˜

1. **æ ¸å¿ƒå‚æ•°ä¿®æ­£**
```diff
- params = {'pageid': '153', 'lid': '2509'}  
+ params = {'pageid': '353', 'lid': '2599', 'knum': '50'}
```
ï¼ˆæ›´æ­£äº†åˆ†ç±»æ ‡è¯†ï¼Œç»å®æµ‹åŸå‚æ•°å·²å¤±æ•ˆï¼‰

2. **åŠ¨æ€ååçˆ¬æœºåˆ¶**
   - å¢åŠ äº†ä¼šè¯ä¿æŒ (`Session()`)
   - æ™ºèƒ½éšæœºå»¶æ—¶ (0.5-2ç§’)
   - é«˜é¢‘æœ‰æ•ˆè¯·æ±‚å¤´å‚æ•°ï¼ˆåŒ…å«Refererï¼‰

3. **æ­£æ–‡è§£æä¿éšœ**
   - ä½¿ç”¨CSSé€‰æ‹©å™¨çš„ä¼˜å…ˆé˜Ÿåˆ—æœºåˆ¶
   - åˆ©ç”¨`lxml`è§£æå™¨æå‡å®¹é”™èƒ½åŠ›
   - å¤šé‡å†…å®¹æ¥æºå…¼å®¹ï¼ˆå›¾æ–‡ã€è§†é¢‘ç­‰ç±»å‹ï¼‰

---

### ğŸ“Š æ•°æ®éªŒè¯æ–¹æ³•
ä¿å­˜ç»“æœåè¿è¡Œï¼š
```python
df = pd.read_csv('sina_tech_news_stable.csv')
pd.set_option('display.max_colwidth', 60)
print(f"æœ‰æ•ˆè®°å½•æ•°ï¼š{len(df)}")
print("å†…å®¹é‡‡æ ·ï¼š")
print(df.sample(3)[['æ ‡é¢˜', 'å†…å®¹']])
```

å¦‚å‘ç°é—®é¢˜ï¼Œå¯å¯¹`selectors`åˆ—è¡¨è¿›è¡Œè°ƒæ•´æˆ–è¡¥å……æ–°é€‰æ‹©å™¨æ–¹æ¡ˆã€‚è¯·åœ¨å®é™…éƒ¨ç½²æ—¶æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´åˆ†é¡µå‚æ•°ã€‚
